<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Module Development for Jamovi • ClinicoPath</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Module Development for Jamovi">
<meta property="og:description" content="ClinicoPath">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ClinicoPath</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.2.0025</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../dev/index.html">
    <span class="fa fa-cogs"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/data-preperation.html">Data Preperation for Clinicopathology Histopathology Pathology Research</a>
    </li>
    <li>
      <a href="../articles/module_development_jamovi.html">Module Development for Jamovi</a>
    </li>
    <li>
      <a href="../articles/motivation.html">Motivation</a>
    </li>
    <li>
      <a href="../articles/pathology_jamovi.html">Using jamovi for the Common Statistical Analysis in Pathology</a>
    </li>
    <li>
      <a href="../articles/pkgnet-report.html">ClinicoPath Package Report, by pkgnet</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="http://twitter.com/serdarbalci">
    <span class="fab fa fab fa-twitter fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/sbalci/ClinicoPathJamoviModule/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Module Development for Jamovi</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/sbalci/ClinicoPathJamoviModule/blob/master/vignettes/module_development_jamovi.Rmd"><code>vignettes/module_development_jamovi.Rmd</code></a></small>
      <div class="hidden name"><code>module_development_jamovi.Rmd</code></div>

    </div>

    
    
<div id="a-beginners-guide-to-jamovi-modules-or-jamovi-modules-for-dummies" class="section level1">
<h1 class="hasAnchor">
<a href="#a-beginners-guide-to-jamovi-modules-or-jamovi-modules-for-dummies" class="anchor"></a>‘A beginners guide to jamovi modules’ or ‘jamovi modules for dummies’</h1>
<p>Official documentation is here: <a href="https://dev.jamovi.org/" class="uri">https://dev.jamovi.org/</a></p>
<div id="tldr" class="section level2">
<h2 class="hasAnchor">
<a href="#tldr" class="anchor"></a>TL;DR</h2>
<ul>
<li>Details are here: <a href="https://dev.jamovi.org/" class="uri">https://dev.jamovi.org/</a>
</li>
</ul>
<p>Briefly:</p>
<ul>
<li><p>Use <code>R 3.6.3</code></p></li>
<li><p>Install jamovi from this link: <a href="https://www.jamovi.org/download.html" class="uri">https://www.jamovi.org/download.html</a> Get the latest one 1.2.19</p></li>
<li><p>Install jmvtools package with: <code><a href="https://rdrr.io/r/utils/install.packages.html">install.packages('jmvtools', repos=c('https://repo.jamovi.org', 'https://cran.r-project.org'))</a></code></p></li>
<li><p>locate jamovi bin folder via this: <code><a href="https://rdrr.io/pkg/jmvtools/man/check.html">jmvtools::check("C://Program Files//jamovi//bin")</a></code> I recommend changing folder name from default <code>jamovi 1.2</code> to <code>jamovi</code></p></li>
<li><p>Fork and Clone this repo: <a href="https://github.com/sbalci/ClinicoPath" class="uri">https://github.com/sbalci/ClinicoPath</a></p></li>
<li><p>inside this repo folder in R <code><a href="https://rdrr.io/pkg/jmvtools/man/install.html">jmvtools::install()</a></code></p></li>
<li><p>it will produce a file named ClinicoPath.jmo and install this module to jamovi</p></li>
<li><p>The repo is like an R package except <code>jamovi</code> folder.</p></li>
<li><p>You need to edit <code>R/crosstable.b.R</code></p></li>
<li><p>Just edit the <code>tangram::</code> code <a href="https://dev.jamovi.org/tuts0104-implementing-an-analysis.html" class="uri">https://dev.jamovi.org/tuts0104-implementing-an-analysis.html</a> <a href="https://dev.jamovi.org/tuts0105-debugging-an-analysis.html" class="uri">https://dev.jamovi.org/tuts0105-debugging-an-analysis.html</a></p></li>
<li><p>In DESCRIPTION file change <code>spgarbet/tangram@0.3.2</code> to the version you want to test.</p></li>
<li><p>run <code><a href="https://rdrr.io/pkg/jmvtools/man/install.html">jmvtools::install()</a></code> again.</p></li>
</ul>
<p>Let me know how it goes :)</p>
</div>
<div id="user2017-jamovi-a-spreadsheet-for-r" class="section level2">
<h2 class="hasAnchor">
<a href="#user2017-jamovi-a-spreadsheet-for-r" class="anchor"></a><a href="https://channel9.msdn.com/Events/useR-international-R-User-conferences/useR-International-R-User-2017-Conference/jamovi-a-spreadsheet-for-R">useR!2017: <em>jamovi</em>: a spreadsheet for R</a>
</h2>
<iframe src="https://channel9.msdn.com/Events/useR-international-R-User-conferences/useR-International-R-User-2017-Conference/jamovi-a-spreadsheet-for-R/player" width="50%" allowfullscreen frameborder="0" title="*jamovi*: a spreadsheet for R - Microsoft Channel 9 Video">
</iframe>
</div>
<div id="preparing-development-tools" class="section level2">
<h2 class="hasAnchor">
<a href="#preparing-development-tools" class="anchor"></a>preparing development tools</h2>
<div id="use-an-unsigned-version-of-jamovi-for-development-in-mac" class="section level3">
<h3 class="hasAnchor">
<a href="#use-an-unsigned-version-of-jamovi-for-development-in-mac" class="anchor"></a>use an unsigned version of jamovi for development in mac</h3>
<p><a href="https://dev.jamovi.org/#28-02-2020" class="uri">https://dev.jamovi.org/#28-02-2020</a></p>
<p><a href="https://www.jamovi.org/downloads/jamovi-unsigned.zip" class="uri">https://www.jamovi.org/downloads/jamovi-unsigned.zip</a></p>
</div>
<div id="jmvtools-should-be-installed-from-the-jamovi-repo" class="section level3">
<h3 class="hasAnchor">
<a href="#jmvtools-should-be-installed-from-the-jamovi-repo" class="anchor"></a>jmvtools should be installed from the jamovi repo</h3>
<p><a href="https://dev.jamovi.org/tuts0101-getting-started.html" class="uri">https://dev.jamovi.org/tuts0101-getting-started.html</a></p>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">'jmvtools'</span>, <span class="kw">repos</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'https://repo.jamovi.org'</span>, <span class="st">'https://cran.r-project.org'</span>))</pre></body></html></div>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="kw pkg">jmvtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvtools/man/check.html">check</a></span>()</pre></body></html></div>
<div class="sourceCode" id="cb3"><html><body><pre class="r"><span class="kw pkg">jmvtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvtools/man/install.html">install</a></span>()</pre></body></html></div>
<p>You can use <code><a href="https://devtools.r-lib.org//reference/install.html">devtools::install()</a></code> to use your codes as a usual R package, submit to github or CRAN. <code><a href="https://devtools.r-lib.org//reference/check.html">devtools::check()</a></code> does not like some jamovi folders so be sure to add them under <code>.Rbuildignore</code></p>
</div>
</div>
<div id="creating-a-module" class="section level2">
<h2 class="hasAnchor">
<a href="#creating-a-module" class="anchor"></a>Creating a Module</h2>
<p><a href="https://dev.jamovi.org/tuts0102-creating-a-module.html" class="uri">https://dev.jamovi.org/tuts0102-creating-a-module.html</a></p>
<div class="sourceCode" id="cb4"><html><body><pre class="r"><span class="kw pkg">jmvtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvtools/man/create.html">create</a></span>(<span class="kw">path</span> <span class="kw">=</span> <span class="st">"~/ClinicoPathDescriptives"</span>)</pre></body></html></div>
</div>
<div id="add-analysis" class="section level2">
<h2 class="hasAnchor">
<a href="#add-analysis" class="anchor"></a>add analysis</h2>
<div class="sourceCode" id="cb5"><html><body><pre class="r"><span class="kw pkg">jmvtools</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmvtools/man/create.html">create</a></span>(<span class="st">'function'</span>)</pre></body></html></div>
</div>
</div>
<div id="structure" class="section level1">
<h1 class="hasAnchor">
<a href="#structure" class="anchor"></a>Structure</h1>
<hr>
<iframe src="https://docs.google.com/presentation/d/e/2PACX-1vTfA7dL5y_PzY5L-f8FRxaqvKMME5pcDCbXtWk5-FUNCGJyFKpGJEp8ES9rAge0CbI3Gcbi7Emv4e-S/embed?start=false&amp;loop=true&amp;delayms=3000" frameborder="0" width="960" height="569" allowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true">
</iframe>
<hr>
<div id="development-files" class="section level2">
<h2 class="hasAnchor">
<a href="#development-files" class="anchor"></a>Development Files</h2>
<div id="description-file" class="section level3">
<h3 class="hasAnchor">
<a href="#description-file" class="anchor"></a><code>DESCRIPTION</code> file</h3>
<p><code>Imports</code>, <code>Depends</code>, <code>Suggests</code>, and <code>Remotes</code> have practically no difference in building jamovi modules. The <code><a href="https://rdrr.io/pkg/jmvtools/man/install.html">jmvtools::install()</a></code> copies libraries under <em>build</em> folder.</p>
<p>Under <code>Imports</code> <code>jmvcore</code> and <code>R6</code> are defaults.</p>
<p>With Remotes one can install github packages as well. But with each <code><a href="https://rdrr.io/pkg/jmvtools/man/install.html">jmvtools::install()</a></code> command it tries to check the updates, and if you are online throws an error. An <code>upgrade = FALSE, quick = TRUE</code> argument like in devtools::install() is not available, yet. One workaround is temporarily deleting Remotes from DESCRIPTION. The package folders continue to remain under build folder.</p>
<p>One can also directly copy package folders from system R package folder (find via <code><a href="https://rdrr.io/r/base/libPaths.html">.libPaths()</a></code>) as well.</p>
</div>
<div id="namespace-file" class="section level3">
<h3 class="hasAnchor">
<a href="#namespace-file" class="anchor"></a><code>NAMESPACE</code> file</h3>
<p>No need to change.</p>
</div>
<div id="r-folder" class="section level3">
<h3 class="hasAnchor">
<a href="#r-folder" class="anchor"></a><code>R</code> folder</h3>
<p>R folder is where the codes are present. There are two files.</p>
<div id="function-h-r" class="section level4">
<h4 class="hasAnchor">
<a href="#function-h-r" class="anchor"></a><code>function.h.R</code>
</h4>
<p>No need to change. Auto-updated and overwritten.</p>
</div>
<div id="function-b-r" class="section level4">
<h4 class="hasAnchor">
<a href="#function-b-r" class="anchor"></a><code>function.b.R</code>
</h4>
<div id="write-formula" class="section level5">
<h5 class="hasAnchor">
<a href="#write-formula" class="anchor"></a>Write Formula</h5>
<p><a href="https://cran.r-project.org/web/packages/jmv/vignettes/new-syntax.html" class="uri">https://cran.r-project.org/web/packages/jmv/vignettes/new-syntax.html</a></p>
<div class="sourceCode" id="cb6"><html><body><pre class="r"><span class="kw pkg">jmv</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmv/man/ANOVA.html">ANOVA</a></span>(<span class="kw">formula</span> <span class="kw">=</span> <span class="no">len</span> ~ <span class="no">supp</span> * <span class="no">dose</span>, <span class="no">ToothGrowth</span>)</pre></body></html></div>
<div class="sourceCode" id="cb7"><html><body><pre class="r"><span class="kw pkg">jmv</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmv/man/ANOVA.html">ANOVA</a></span>(<span class="no">ToothGrowth</span>, <span class="no">len</span>, <span class="fu">vars</span>(<span class="no">supp</span>, <span class="no">dose</span>))</pre></body></html></div>
<div class="sourceCode" id="cb8"><html><body><pre class="r"><span class="kw pkg">jmv</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmv/man/ANOVA.html">ANOVA</a></span>(<span class="no">...</span>, <span class="kw">emMeans</span> <span class="kw">=</span> ~ <span class="no">supp</span> + <span class="no">dose</span>:<span class="no">supp</span>)</pre></body></html></div>
<div class="sourceCode" id="cb9"><html><body><pre class="r"><span class="kw pkg">jmv</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmv/man/ANOVA.html">ANOVA</a></span>(<span class="no">ToothGrowth</span>, <span class="st">'len'</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'supp'</span>, <span class="st">'dose'</span>))</pre></body></html></div>
<blockquote>
<p>In this case, jmv will look for variables in ToothGrowth called ‘dep’ or ‘factors’. This is tidy evaluation. To instruct jmv to use the contents of it’s arguments, rather than the symbol name, prefix them with the !! signifier. For example:</p>
</blockquote>
<div class="sourceCode" id="cb10"><html><body><pre class="r"><span class="no">dep</span> <span class="kw">&lt;-</span> <span class="st">'len'</span>
<span class="no">factors</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'supp'</span>, <span class="st">'dose'</span>)

<span class="kw pkg">jmv</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/jmv/man/ANOVA.html">ANOVA</a></span>(<span class="no">ToothGrowth</span>, !!<span class="no">dep</span>, !!<span class="no">factors</span>)</pre></body></html></div>
</div>
<div id="warning-error-messages" class="section level5">
<h5 class="hasAnchor">
<a href="#warning-error-messages" class="anchor"></a>Warning, Error Messages</h5>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="kw">if</span> (<span class="fu"><a href="https://rdrr.io/r/base/nrow.html">nrow</a></span>(<span class="no">self</span>$<span class="no">data</span>) <span class="kw">==</span> <span class="fl">0</span>) <span class="fu"><a href="https://rdrr.io/r/base/stop.html">stop</a></span>(<span class="st">"Data contains no (complete) rows"</span>)</pre></body></html></div>
</div>
<div id="prepare-data-for-analysis" class="section level5">
<h5 class="hasAnchor">
<a href="#prepare-data-for-analysis" class="anchor"></a>Prepare Data For Analysis</h5>
<pre><code>        varsName &lt;- self$options$vars

        data &lt;- jmvcore::select(self$data, c(varsName))</code></pre>
</div>
<div id="remove-na-containing-cases-works-on-selected-variables" class="section level5">
<h5 class="hasAnchor">
<a href="#remove-na-containing-cases-works-on-selected-variables" class="anchor"></a>Remove NA containing cases (works on selected variables)</h5>
<pre><code>        data &lt;- jmvcore::naOmit(data)</code></pre>
<p>jmvcore::toNumeric() <a href="https://dev.jamovi.org/tuts0202-handling-data.html" class="uri">https://dev.jamovi.org/tuts0202-handling-data.html</a></p>
<p>can I just send whole data to plot function? you usually don’t want to, but sometimes it’s appropriate. normally you just provide a summary of the data to the plot function … just enough data for it to do it’s job. but if you need the whole data set for the plot function, then you can specify requiresData: true on the image object. that means the plot function can access self$data. i do it in the correlation matrix for example. there’s no summary i could send … the plot function needs all the data: <a href="https://github.com/jamovi/jmv/blob/master/jamovi/corrmatrix.r.yaml#L143" class="uri">https://github.com/jamovi/jmv/blob/master/jamovi/corrmatrix.r.yaml#L143</a> jamovi/corrmatrix.r.yaml:143 requiresData: true</p>
</div>
<div id="prepare-data-to-send-to-plot-function" class="section level5">
<h5 class="hasAnchor">
<a href="#prepare-data-to-send-to-plot-function" class="anchor"></a>Prepare Data to Send to Plot Function</h5>
</div>
</div>
</div>
<div id="jamovi-folder" class="section level3">
<h3 class="hasAnchor">
<a href="#jamovi-folder" class="anchor"></a>jamovi folder</h3>
<div id="function-a-yaml" class="section level4">
<h4 class="hasAnchor">
<a href="#function-a-yaml" class="anchor"></a>function.a.yaml</h4>
</div>
<div id="function-r-yaml" class="section level4">
<h4 class="hasAnchor">
<a href="#function-r-yaml" class="anchor"></a>function.r.yaml</h4>
<div id="preformatted" class="section level5">
<h5 class="hasAnchor">
<a href="#preformatted" class="anchor"></a>preformatted</h5>
<p>Using “preformatted” result element I get a markdown table output. Is there a way to somehow render/convert this output to html version. Or should I go with <a href="https://dev.jamovi.org/api_table.html" class="uri">https://dev.jamovi.org/api_table.html</a> table api?</p>
<p>so you’re best to make use of the table api … the table API has a lot more features than an md table.</p>
</div>
<div id="p-value" class="section level5">
<h5 class="hasAnchor">
<a href="#p-value" class="anchor"></a>p-value</h5>
<div class="sourceCode" id="cb14"><pre class="sourceCode yaml"><code class="sourceCode yaml"><span id="cb14-1"><a href="#cb14-1"></a><span class="at">     </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> p</span></span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="at">       </span><span class="fu">title</span><span class="kw">:</span><span class="at"> </span><span class="st">"p"</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="at">       </span><span class="fu">type</span><span class="kw">:</span><span class="at"> number</span></span>
<span id="cb14-4"><a href="#cb14-4"></a><span class="at">       </span><span class="fu">format</span><span class="kw">:</span><span class="at"> zto,pvalue</span></span></code></pre></div>
</div>
</div>
<div id="function-u-yaml" class="section level4">
<h4 class="hasAnchor">
<a href="#function-u-yaml" class="anchor"></a>function.u.yaml</h4>
<div id="levelselector" class="section level5">
<h5 class="hasAnchor">
<a href="#levelselector" class="anchor"></a>LevelSelector</h5>
<pre><code> i have added the property allowNone to the LevelSelector control. This will allow the user to select None from the listbox.</code></pre>
</div>
<div id="maxitemcount-1" class="section level5">
<h5 class="hasAnchor">
<a href="#maxitemcount-1" class="anchor"></a>maxItemCount: 1</h5>
</div>
</div>
<div id="yaml" class="section level4">
<h4 class="hasAnchor">
<a href="#yaml" class="anchor"></a>0000.yaml</h4>
</div>
<div id="refs-yaml" class="section level4">
<h4 class="hasAnchor">
<a href="#refs-yaml" class="anchor"></a>00refs.yaml</h4>
<p>prepare a 00refs.yaml like this: <a href="https://github.com/jamovi/jmv/blob/master/jamovi/00refs.yaml" class="uri">https://github.com/jamovi/jmv/blob/master/jamovi/00refs.yaml</a></p>
<p>attach references to objects in the .r.yaml file like this:</p>
<p><a href="https://github.com/jamovi/jmv/blob/master/jamovi/ancova.r.yaml#L174" class="uri">https://github.com/jamovi/jmv/blob/master/jamovi/ancova.r.yaml#L174</a></p>
</div>
</div>
</div>
<div id="tables" class="section level2">
<h2 class="hasAnchor">
<a href="#tables" class="anchor"></a>Tables</h2>
<p>I want a long table. I tried to use following but got error.</p>
<p>Below is my current .r.yaml - name: irrtable title: Interrater Reliability type: Table rows: 1 columns: - name: method title: ‘Method’ type: text - name: subjects title: ‘Subjects’ type: integer - name: raters title: ‘Raters’ type: integer - name: peragree title: ‘Agreement %’ type: number - name: kappa title: ‘Kappa’ type: number - name: z title: ‘z’ type: number - name: p title: ‘p-value’ type: number format: zto,pvalue</p>
<ul>
<li>try setting swapRowsColumns to true.</li>
<li>alternatively, you can name your columns like this method[a], method[b], this will cause the row to be ‘folded’ where the value in method[b] appears below the value in method[a] . an example of this is the t-test: <a href="https://github.com/jamovi/jmv/blob/master/jamovi/ttestis.r.yaml#L20" class="uri">https://github.com/jamovi/jmv/blob/master/jamovi/ttestis.r.yaml#L20</a>
</li>
</ul>
</div>
<div id="plots" class="section level2">
<h2 class="hasAnchor">
<a href="#plots" class="anchor"></a>Plots</h2>
</div>
<div id="build-folder" class="section level2">
<h2 class="hasAnchor">
<a href="#build-folder" class="anchor"></a><code>build</code> folder</h2>
<div id="js-folder" class="section level3">
<h3 class="hasAnchor">
<a href="#js-folder" class="anchor"></a><code>js</code> folder</h3>
<div id="event-js" class="section level4">
<h4 class="hasAnchor">
<a href="#event-js" class="anchor"></a>event.js</h4>
</div>
</div>
<div id="r3-6-3-macos" class="section level3">
<h3 class="hasAnchor">
<a href="#r3-6-3-macos" class="anchor"></a>R3.6.3-macos</h3>
</div>
</div>
<div id="installing" class="section level2">
<h2 class="hasAnchor">
<a href="#installing" class="anchor"></a>Installing</h2>
<div id="jmvtoolsinstall" class="section level3">
<h3 class="hasAnchor">
<a href="#jmvtoolsinstall" class="anchor"></a><code>jmvtools::install</code>
</h3>
</div>
<div id="devtoolsinstall" class="section level3">
<h3 class="hasAnchor">
<a href="#devtoolsinstall" class="anchor"></a><code>devtools::install</code>
</h3>
<div class="sourceCode" id="cb16"><html><body><pre class="r"><span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/install.html">install</a></span>(<span class="kw">upgrade</span> <span class="kw">=</span> <span class="fl">FALSE</span>, <span class="kw">quick</span> <span class="kw">=</span> <span class="fl">TRUE</span>)</pre></body></html></div>
</div>
</div>
<div id="other-tips" class="section level2">
<h2 class="hasAnchor">
<a href="#other-tips" class="anchor"></a>Other Tips</h2>
<div id="code-search-in-github" class="section level3">
<h3 class="hasAnchor">
<a href="#code-search-in-github" class="anchor"></a>Code Search in GitHub</h3>
<p><a href="https://github.com/search/advanced?q=select+repo%3Ajamovi%2Fjmv+filename%3A.b.R+language%3AR&amp;type=Code" class="uri">https://github.com/search/advanced?q=select+repo%3Ajamovi%2Fjmv+filename%3A.b.R+language%3AR&amp;type=Code</a></p>
<p><a href="https://github.com/search?l=&amp;q=select+repo%3Ajamovi%2Fjmv+filename%3A.b.R+language%3AR&amp;type=Code" class="uri">https://github.com/search?l=&amp;q=select+repo%3Ajamovi%2Fjmv+filename%3A.b.R+language%3AR&amp;type=Code</a></p>
<pre><code>select repo:jamovi/jmv filename:.b.R language:R</code></pre>
<div class="sourceCode" id="cb18"><html><body><pre class="r">generate advanced search for all jamovi library
jamovi_library_names &lt;- readLines("https://raw.githubusercontent.com/jonathon-love/jamovi-library/master/modules.yaml")

jamovi_library_names &lt;- stringr::str_extract(
  string = jamovi_library_names,
  pattern = "github.com/(.*).git")

jamovi_library_names &lt;- jamovi_library_names[!is.na(jamovi_library_names)]

jamovi_library_names &lt;- gsub(pattern = "github.com/|.git",
                             replacement = "",
                             x = jamovi_library_names)

jamovi_library_names &lt;- c("jamovi/jmv", jamovi_library_names)

jamovi_library_names &lt;- gsub(pattern = "/",
                              replacement = "%2F",
                              x = jamovi_library_names)

query &lt;- "type: Level"

repos &lt;- paste0("repo%3A",jamovi_library_names,"+")

repos &lt;- paste0(repos, collapse = "")

repos &lt;- gsub(pattern = "\\+$",
              replacement = "",
              x = repos)

github_search &lt;- paste0("https://github.com/search?q=",
                        query,
                        "+",
                        repos,
                        "&amp;type=Code&amp;ref=advsearch&amp;l=&amp;l=")

cat(github_search)</pre></body></html></div>
</div>
<div id="library-development-status" class="section level3">
<h3 class="hasAnchor">
<a href="#library-development-status" class="anchor"></a>Library Development Status</h3>
<p><a href="https://ci.appveyor.com/project/jonathon-love/jamovi-library/history" class="uri">https://ci.appveyor.com/project/jonathon-love/jamovi-library/history</a></p>
</div>
<div id="yaml-1" class="section level3">
<h3 class="hasAnchor">
<a href="#yaml-1" class="anchor"></a>YAML</h3>
<iframe width="560" height="315" src="https://www.youtube.com/embed/cdLNKUoMc6c" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen>
</iframe>
</div>
<div id="rstudio-options" class="section level3">
<h3 class="hasAnchor">
<a href="#rstudio-options" class="anchor"></a>RStudio options</h3>
<div id="gitignore" class="section level4">
<h4 class="hasAnchor">
<a href="#gitignore" class="anchor"></a>.gitignore</h4>
<p>add following to .gitignore file</p>
<pre><code># jamovi
/build/
/build-*/
*.jmo</code></pre>
</div>
</div>
<div id="r-version" class="section level3">
<h3 class="hasAnchor">
<a href="#r-version" class="anchor"></a>R version</h3>
<p>Try to use compatible packages with the jamovi’s R version.</p>
<p>Use: <strong>R 3.6.3</strong> <a href="https://cran.r-project.org/bin/macosx/R-3.6.3.pkg" class="uri">https://cran.r-project.org/bin/macosx/R-3.6.3.pkg</a></p>
<p>Use packages from mran:</p>
<div class="sourceCode" id="cb20"><html><body><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="kw">repos</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">'https://repo.jamovi.org'</span>,
                  <span class="st">"https://cran.microsoft.com/snapshot/2020-05-01/"</span>
                  )
)</pre></body></html></div>
</div>
<div id="base-r-packages-within-jamovi" class="section level3">
<h3 class="hasAnchor">
<a href="#base-r-packages-within-jamovi" class="anchor"></a>Base R packages within jamovi</h3>
<pre><code>jamovi.app/Contents/Resources/modules/base/R

this folder contains base R packages used for jamovi.

jmvtools::install() prevent the packages already installed in base/R from being installed into your module. 

(jmvtools is an R package which is a thin wrapper around the jamovi-compiler. The jamovi-compiler is written in javascript)

That cause problems if you are using different package versions. So it is best to keep up with suggested 'mran' version. </code></pre>
</div>
<div id="electron" class="section level3">
<h3 class="hasAnchor">
<a href="#electron" class="anchor"></a>Electron</h3>
<p>jamovi is electron based. See R, shiny, and electron based application development here: <a href="https://github.com/sbalci/clinicopathological#deploying-a-shiny-app-as-a-desktop-application-with-electron">Deploying a Shiny app as a desktop application with Electron</a></p>
</div>
<div id="project-structure" class="section level3">
<h3 class="hasAnchor">
<a href="#project-structure" class="anchor"></a>Project Structure</h3>
<p><a href="https://dev.jamovi.org/info_project-structure.html" class="uri">https://dev.jamovi.org/info_project-structure.html</a></p>
<p><a href="https://forum.jamovi.org/viewtopic.php?f=12&amp;t=1253&amp;p=4251&amp;hilit=npm#p4251" class="uri">https://forum.jamovi.org/viewtopic.php?f=12&amp;t=1253&amp;p=4251&amp;hilit=npm#p4251</a></p>
<blockquote>
<p>the easiest way to build jamovi on macOS is to use our dev bundle. <a href="https://www.jamovi.org/downloads/jamovi-dev.zip" class="uri">https://www.jamovi.org/downloads/jamovi-dev.zip</a> if you navigate to the <code>jamovi.app/Contents/Resources</code> folder, you’ll find a package.json which contains a bunch of different build commands. you can issue commands like: npm run build:client npm run build:server npm run build:analyses:jmv depending on which component you’re wanting to build.</p>
</blockquote>
</div>
</div>
<div id="other-codes" class="section level2">
<h2 class="hasAnchor">
<a href="#other-codes" class="anchor"></a>Other Codes</h2>
</div>
<div id="add-datasets" class="section level2">
<h2 class="hasAnchor">
<a href="#add-datasets" class="anchor"></a>Add Datasets</h2>
<pre><code>make a data folder (same as with an R package), and then you put entries in your 0000.yaml file:
https://github.com/gamlj/gamlj/blob/master/jamovi/0000.yaml#L47-L108
jamovi/0000.yaml:47-108
datasets:
  - name: qsport
    path: qsport.csv
    description: Training hours
    tags:</code></pre>
<p>.omv and .csv allowed. excel is also allowed but user does not see if it is csv or excel file.</p>
</div>
<div id="error-messages" class="section level2">
<h2 class="hasAnchor">
<a href="#error-messages" class="anchor"></a>Error messages</h2>
<div class="sourceCode" id="cb23"><html><body><pre class="r"><span class="no">data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span>(<span class="kw">outcome</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="fl">1</span>,<span class="fl">0</span>,<span class="fl">0</span>,<span class="fl">1</span>,<span class="fl">NA</span>,<span class="fl">1</span>))
<span class="no">data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html">na.omit</a></span>(<span class="no">data</span>)
<span class="kw">if</span> ( ! <span class="fu"><a href="https://rdrr.io/r/base/numeric.html">is.numeric</a></span>(<span class="no">data</span>$<span class="no">outcome</span>) <span class="kw">||</span> <span class="fu"><a href="https://rdrr.io/r/base/any.html">any</a></span>(<span class="no">data</span>$<span class="no">outcome</span> <span class="kw">!=</span> <span class="fl">0</span> <span class="kw">&amp;</span> <span class="no">data</span>$<span class="no">outcome</span> <span class="kw">!=</span> <span class="fl">1</span>))
  <span class="fu"><a href="https://rdrr.io/r/base/stop.html">stop</a></span>(<span class="st">'Outcome variable must only contains 1s and 0s'</span>)</pre></body></html></div>
<p>it’s good to test lots of different data sets that a user may have … include missing values, really large values, etc. etc. and make sure your analyses always handle them, and provide useful error messages for why an analysis doesn’t work. you don’t want to leave the user uncertain why something isn’t working … otherwise they just give up.</p>
<p>part of our philosophy is that people shouldn’t have to set their data up if they can’t be bothered … because with large data sets it can take a lot of time. so i’d encourage you to treat whatever the user provides you with as continuous, by converting it with toNumeric() … more on our data philosophy here: <a href="https://dev.jamovi.org/tuts0202-handling-data.html" class="uri">https://dev.jamovi.org/tuts0202-handling-data.html</a></p>
<p><a href="https://youtu.be/oWZrrWc6e74" class="uri">https://youtu.be/oWZrrWc6e74</a></p>
<p>in the options, you’ve got Survival Curve, and in the results, it’s Survival Plot … i’d encourage you to make these consistent. also, if the Survival Curve is unchecked, i’d hide the Surival plot, rather than leaving all that vacant space there.</p>
<p>visible: (optionName) <a href="https://github.com/jamovi/jmv/blob/master/jamovi/ttestis.r.yaml#L408-L416" class="uri">https://github.com/jamovi/jmv/blob/master/jamovi/ttestis.r.yaml#L408-L416</a> jamovi/ttestis.r.yaml:408-416 - name: qq type: Image description: Q-Q plot width: 350 height: 300</p>
<p>is there a variable type for dates in jamovi? Can I force a user to add only a date to a VariablesListBox? I tried to get info from a self<span class="math inline">\(options\)</span>var via lubridate::is.Date and is.na.POSIXlt but it did not work hi, we don’t have a date data type at this time … only integer, numeric, and character … you could have people enter dates as character, and parse them yourself, but i appreciate that’s a bit of a hack</p>
<p>Thank you. Dates are always a problem in my routine practice. I work with many international colleagues and always date column is a mess, and people calculate survival time very differently. I want to have raw dates so that I can calculate survival time. I will try somehow going around.</p>
<p>learn YAML syntax</p>
<p>it’s a pretty straightforward syntax … you’ve basically got ‘objects’ where each of the elements have names, and you’ve got arrays, where each of the objects have an index. and that’s more-or-less all there is to it. you can take a look at jmv for examples: <a href="https://github.com/jamovi/jmv/tree/master/jamovi" class="uri">https://github.com/jamovi/jmv/tree/master/jamovi</a></p>
<p>I don’t think we’ve got a list of allowed parameters anywhere. Probably your best bet is to browse through the .yaml files in jmv. I think you’ll find there’s not that many parameter names.</p>
<p>as a work-around, once it’s installed the package from the Remotes, you can remove it from the DESCRIPTION and it won’t keep installing it over and over</p>
<p>Hi, there are scarce sources for pairwise chi-square tests. I have found rmngb::pairwise.chisq.test() and rmngb::pairwise.fisher.test() but that package has been removed from CRAN. Would you consider implementing this feature? I also thought to add these functions in a module, but I want to ask your policy about removed packages as well. 4 replies</p>
<p>jonathon:whale2: 18 days ago provided the module can be built with an entry in REMOTES, we don’t care if it’s not on CRAN</p>
<p>jonathon:whale2: 18 days ago … but you’re obviously taking a risk using something which isn’t maintained</p>
<p>Serdar Balci 18 days ago Thanks. Maybe just copying that function with appropriate reference may solve maintenance issue. I will think about it.</p>
<p>jonathon:whale2: 18 days ago oh yup</p>
<hr>
<p>I have a question. I want to user to enter cut points in a box and then evaluate it as a vector. the function is this: summary(km_fit, times = c(12,36,60) I want user to define times vector. I have tried the following: utimes &lt;- jmvcore::decomposeTerms(self<span class="math inline">\(options\)</span>cutp) utimes &lt;- as.vector(utimes) summary(km_fit, times = utimes a.yaml is as follows: - name: cutp title: Define at least two cutpoints (in months) for survival table type: String default: ‘12, 36, 60’ Would you please guide me to convert input into a vector. (edited) 3 replies</p>
<p>Serdar Balci 13 hours ago I think this seems to work: utimes &lt;- self<span class="math inline">\(options\)</span>cutp utimes &lt;- strsplit(utimes, “,”) utimes &lt;- purrr::reduce(utimes, as.vector) utimes &lt;- as.numeric(utimes) (edited)</p>
<p>jonathon:whale2: 5 hours ago yup, this will do it too: as.numeric(strsplit(utimes, ‘,’)[[1]]) (it’s better if you can avoid using purrr, because it’s not really necessary, and you’re better off reducing the amount of dependencies you use)</p>
<p>Serdar Balci 5 hours ago thank you. :+1:</p>
<hr>
<p>so wrt width/height, you can set that in the .r.yaml like so: <a href="https://github.com/kylehamilton/MAJOR/blob/master/jamovi/bayesmetacorr.r.yaml#L46-L49" class="uri">https://github.com/kylehamilton/MAJOR/blob/master/jamovi/bayesmetacorr.r.yaml#L46-L49</a> it’s possible to do it programmatically, with … image$setSize()</p>
<hr>
<pre><code>Serdar Balci  4:48 PM
 I think I am getting familiar with the codes :)
QuickTime Movie
JamoviModule.mov
4 MB QuickTime Movie— Click to download</code></pre>
<pre><code>Serdar Balci Nov 29th, 2019 at 12:39 PM
Module names now have R version and OS in them. Does it mean that this will not work in windows Installing ClinicoPath_0.0.1-macos-R3.3.0.jmo

4 replies

jonathon:whale2:  3 months ago
It depends on whether there are any native R packages in your modules dependencies. Most modules do, but some don't. (You'll notice there's a "uses native" property there now too ... my intention is to use that to determine if a module can be used cross platform or not)

jonathon:whale2:  3 months ago
If there's native dependencies, then the module needs to be built separately for each os.

jonathon:whale2:  3 months ago
But I can take care of building it for different oses

Serdar Balci  3 months ago
Oh, I see. Thank you :slightly_smiling_face:</code></pre>
<hr>
</div>
</div>
<div id="develop" class="section level1">
<h1 class="hasAnchor">
<a href="#develop" class="anchor"></a>Develop</h1>
<div class="sourceCode" id="cb26"><html><body><pre class="r">library, eval=FALSE, include=FALSE
# install.packages('jmvtools', repos=c('https://repo.jamovi.org', 'https://cran.r-project.org'))

# jmvtools::check("C://Program Files//jamovi//bin")

# jmvtools::install(home = "C://Program Files//jamovi//bin")
#
# devtools::build(path = "C:\\ClinicoPathOutput")

# .libPaths(new = "C:\\ClinicoPathLibrary")

# devtools::build(path = "C:\\ClinicoPathOutput", binary = TRUE, args = c('--preclean'))

Sys.setenv(TZ="Europe/Istanbul")

library("jmvtools")</pre></body></html></div>
<div class="sourceCode" id="cb27"><html><body><pre class="r">
check, eval=FALSE, include=FALSE

jmvtools::check()

# rhub::check_on_macos()

# rhub::check_for_cran()

# codemetar::write_codemeta()


devtools::check()</pre></body></html></div>
<div class="sourceCode" id="cb28"><html><body><pre class="r">pkgdown build, eval=FALSE, include=FALSE
rmarkdown::render('/Users/serdarbalciold/histopathRprojects/ClinicoPath/README.Rmd',  encoding = 'UTF-8', knit_root_dir = '~/histopathRprojects/ClinicoPath', quiet = TRUE)

devtools::document()

pkgdown::build_site()</pre></body></html></div>
<div class="sourceCode" id="cb29"><html><body><pre class="r">git force push, eval=FALSE, include=FALSE
# gitUpdateCommitPush
CommitMessage &lt;- paste("updated on ", Sys.time(), sep = "")
wd &lt;- getwd()
gitCommand &lt;- paste("cd ", wd, " \n git add . \n git commit --message '", CommitMessage, "' \n git push origin master \n", sep = "")
# gitCommand &lt;- paste("cd ", wd, " \n git add . \n git commit --no-verify --message '", CommitMessage, "' \n git push origin master \n", sep = "")
system(command = gitCommand, intern = TRUE)</pre></body></html></div>
<div class="sourceCode" id="cb30"><html><body><pre class="r">add analysis, eval=FALSE, include=FALSE

# jmvtools::install()
#
# jmvtools::create('SuperAwesome')
#
# jmvtools::addAnalysis(name='ttest', title='Independent Samples T-Test')
#
# jmvtools::addAnalysis(name='survival', title='survival')
#
# jmvtools::addAnalysis(name='correlation', title='correlation')
#
# jmvtools::addAnalysis(name='tableone', title='TableOne')
#
# jmvtools::addAnalysis(name='crosstable', title='CrossTable')
#
#
# jmvtools::addAnalysis(name='writesummary', title='WriteSummary')

# jmvtools::addAnalysis(name='finalfit', title='FinalFit')

# jmvtools::addAnalysis(name='multisurvival', title='FinalFit Multivariate Survival')

# jmvtools::addAnalysis(name='report', title='Report General Features')

# jmvtools::addAnalysis(name='frequencies', title='Frequencies')

# jmvtools::addAnalysis(name='statsplot', title='GGStatsPlot')

# jmvtools::addAnalysis(name='statsplot2', title='GGStatsPlot2')

# jmvtools::addAnalysis(name='scat2', title='scat2')

# jmvtools::addAnalysis(name='decisioncalculator', title='Decision Calculator')

# jmvtools::addAnalysis(name='agreement', title='Interrater Intrarater Reliability')

# jmvtools::addAnalysis(name='cluster', title='Cluster Analysis')

# jmvtools::addAnalysis(name='tree', title='Decision Tree')</pre></body></html></div>
<div class="sourceCode" id="cb31"><html><body><pre class="r">devtools install, eval=FALSE, include=FALSE
devtools::install()</pre></body></html></div>
<div class="sourceCode" id="cb32"><html><body><pre class="r">jmvtools install, eval=FALSE, include=FALSE
# jmvtools::check()
jmvtools::install()</pre></body></html></div>
<div class="sourceCode" id="cb33"><html><body><pre class="r">construct, eval=FALSE, include=FALSE
formula &lt;- jmvcore::constructFormula(terms = c("A", "B", "C"), dep = "D")

jmvcore::constructFormula(terms = list("A", "B", c("C", "D")), dep = "E")


jmvcore::constructFormula(terms = list("A", "B", "C"))

vars &lt;- jmvcore::decomposeFormula(formula = formula)

unlist(vars)

cformula &lt;- jmvcore::composeTerm(components = formula)

jmvcore::composeTerm("A")

jmvcore::composeTerm(components = c("A", "B", "C"))

jmvcore::decomposeTerm(term = c("A", "B", "C"))

jmvcore::decomposeTerm(term = formula)

jmvcore::decomposeTerm(term = cformula)



composeTerm &lt;- jmvcore::composeTerm(components = c("A", "B", "C"))

jmvcore::decomposeTerm(term = composeTerm)
</pre></body></html></div>
<hr>
</div>
<div id="example" class="section level1">
<h1 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h1>
<div class="sourceCode" id="cb34"><html><body><pre class="r">read data, eval=FALSE, include=FALSE
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))</pre></body></html></div>
<div class="sourceCode" id="cb35"><html><body><pre class="r">writesummary, eval=FALSE, include=FALSE
devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

# library("ClinicoPath")

deneme$Age &lt;- as.numeric(as.character(deneme$Age))

ClinicoPath::writesummary(data = deneme, vars = Age)

ggstatsplot::normality_message(deneme$Age, "Age")


ClinicoPath::writesummary(
    data = deneme,
    vars = Age)
</pre></body></html></div>
<div class="sourceCode" id="cb36"><html><body><pre class="r">finalfit, eval=FALSE, include=FALSE
devtools::install(upgrade = FALSE, quick = TRUE)
library(dplyr)
library(survival)
library(finalfit)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ClinicoPath::finalfit(data = deneme,
                      explanatory = Sex,
                      outcome = Outcome,
                      overalltime = OverallTime)</pre></body></html></div>
<div class="sourceCode" id="cb37"><html><body><pre class="r">decision, eval=FALSE, include=FALSE
devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

ClinicoPath::decision(
    data = deneme,
    gold = Outcome,
    goldPositive = "1",
    newtest = Smoker,
    testPositive = "TRUE")

ClinicoPath::decision(
    data = deneme,
    gold = LVI,
    goldPositive = "Present",
    newtest = PNI,
    testPositive = "Present")</pre></body></html></div>
<div class="sourceCode" id="cb38"><html><body><pre class="r">eval=FALSE, include=FALSE
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ggstatsplot::ggbetweenstats(data = deneme,
                            x = LVI,
                            y = Age)</pre></body></html></div>
<div class="sourceCode" id="cb39"><html><body><pre class="r">statsplot, eval=FALSE, include=FALSE
devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ClinicoPath::statsplot(
    data = deneme,
    dep = Age,
    group = Smoker)</pre></body></html></div>
<div class="sourceCode" id="cb40"><html><body><pre class="r">decision 2, eval=FALSE, include=FALSE
mytable &lt;- table(deneme$Outcome, deneme$Smoker)

caret::confusionMatrix(mytable)
confusionMatrix(pred, truth)
confusionMatrix(xtab, prevalence = 0.25)

levels(deneme$Outcome)

mytable[1,2]

d &lt;- "0"

mytable[d, "FALSE"]

mytable[[0]]</pre></body></html></div>
<div class="sourceCode" id="cb41"><html><body><pre class="r">construct formula, eval=FALSE, include=FALSE
formula &lt;- jmvcore::constructFormula(terms = c("A", "B", "C"))

jmvcore::constructFormula(terms = list("A", "B", "C"))

vars &lt;- jmvcore::decomposeFormula(formula = formula)

vars &lt;- jmvcore::decomposeTerms(vars)


vars &lt;- unlist(vars)

formula &lt;- as.formula(formula)


my_group &lt;- "lvi"
my_dep &lt;- "age"

formula &lt;- paste0('x = ', group, 'y = ', dep)
myformula &lt;- as.formula(formula)

myformula &lt;- glueformula::gf(my_group, my_dep)

myformula &lt;- glue::glue( 'x = ' , my_group, ', y = ' , my_dep)

myformula &lt;- jmvcore::composeTerm(myformula)
</pre></body></html></div>
<div class="sourceCode" id="cb42"><html><body><pre class="r">eval=FALSE, include=FALSE
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

library(survival)
km_fit &lt;- survfit(Surv(OverallTime, Outcome) ~ LVI, data = deneme)

library(dplyr)
km_fit_median_df &lt;- summary(km_fit)
km_fit_median_df &lt;- as.data.frame(km_fit_median_df$table) %&gt;%
                janitor::clean_names(dat = ., case = "snake") %&gt;%
                tibble::rownames_to_column(.data = ., var = "LVI")</pre></body></html></div>
<div class="sourceCode" id="cb43"><html><body><pre class="r">construct formula 2, eval=FALSE, include=FALSE
library(dplyr)
library(survival)

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

myoveralltime &lt;- deneme$OverallTime
myoutcome &lt;- deneme$Outcome
myexplanatory &lt;- deneme$LVI

class(myoveralltime)
class(myoutcome)
typeof(myexplanatory)

is.ordered(myexplanatory)

formula2 &lt;- jmvcore::constructFormula(terms = "myexplanatory")
# formula2 &lt;- jmvcore::decomposeFormula(formula = formula2)
# formula2 &lt;- paste("", formula2)
# formula2 &lt;- as.formula(formula2)
formula2 &lt;- jmvcore::composeTerm(formula2)


formulaL &lt;- jmvcore::constructFormula(terms = "myoveralltime")
# formulaL &lt;- jmvcore::decomposeFormula(formula = formulaL)

formulaR &lt;- jmvcore::constructFormula(terms = "myoutcome")
# formulaR &lt;- jmvcore::decomposeFormula(formula = formulaR)

formula &lt;- paste("Surv(", formulaL, ",", formulaR, ")")
# formula &lt;- jmvcore::composeTerm(formula)
# formula &lt;- as.formula(formula)
# jmvcore::constructFormula(terms = c(formula, formula2))

deneme %&gt;%
  finalfit::finalfit(formula, formula2) -&gt; tUni

tUni</pre></body></html></div>
<div class="sourceCode" id="cb44"><html><body><pre class="r">eval=FALSE, include=FALSE
library(dplyr)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

results &lt;- deneme %&gt;%
                ggstatsplot::ggbetweenstats(LVI, Age)
results

mydep &lt;- deneme$Age
mygroup &lt;- deneme$LVI


mygroup &lt;- jmvcore::constructFormula(terms = "mygroup")
mygroup &lt;- jmvcore::composeTerm(mygroup)

mydep &lt;- jmvcore::constructFormula(terms = "mydep")
mydep &lt;- jmvcore::composeTerm(mydep)


# not working
# eval(mygroup)
# rlang::eval_tidy(mygroup)
# !!mygroup
# mygroup
# sym(mygroup)
# quote(mygroup)
# enexpr(mygroup)

mygroup &lt;- jmvcore::constructFormula(terms = "mygroup")
mydep &lt;- jmvcore::constructFormula(terms = "mydep")

formula1 &lt;- paste(mydep)
formula1 &lt;- jmvcore::composeTerm(formula1)


mygroup &lt;- paste(mygroup)
mygroup &lt;- jmvcore::composeTerm(mygroup)

mydep &lt;- deneme$Age
mygroup &lt;- deneme$LVI

mydep &lt;- jmvcore::resolveQuo(jmvcore::enquo(mydep))
mygroup &lt;- jmvcore::resolveQuo(jmvcore::enquo(mygroup))

mydata2 &lt;- data.frame(mygroup=mygroup, mydep=mydep)

results &lt;- mydata2 %&gt;%
                ggstatsplot::ggbetweenstats(
x = mygroup, y = mydep  )

results



myformula &lt;- glue::glue('x = ', mygroup, ', y = ' , mydep)

myformula &lt;- jmvcore::composeTerm(myformula)

myformula &lt;- as.formula(myformula)


mydep2 &lt;- quote(mydep)
mygroup2 &lt;- quote(mygroup)


results &lt;- deneme %&gt;%
                ggstatsplot::ggbetweenstats(!!mygroup2, !!mydep2)
results</pre></body></html></div>
<div class="sourceCode" id="cb45"><html><body><pre class="r">construct formula 3, eval=FALSE, include=FALSE
formula &lt;- jmvcore::constructFormula(terms = c("myoveralltime", "myoutcome"))

vars &lt;- jmvcore::decomposeFormula(formula = formula)


explanatory &lt;- jmvcore::constructFormula(terms = c("explanatory"))

explanatory &lt;- jmvcore::decomposeFormula(formula = explanatory)

explanatory &lt;- unlist(explanatory)

myformula &lt;- paste("Surv(", vars[1], ", ", vars[2], ")")



deneme %&gt;%
finalfit::finalfit(myformula, explanatory) -&gt; tUni</pre></body></html></div>
<div class="sourceCode" id="cb46"><html><body><pre class="r">table tangram, eval=FALSE, include=FALSE
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))


table3 &lt;-
  tangram::html5(
    tangram::tangram(
      "Death ~ LVI + PNI + Age", deneme),
    fragment=TRUE,
    inline="nejm.css",
    caption = "HTML5 Table NEJM Style",
    id="tbl3")

table3

mydep &lt;- deneme$Age
mygroup &lt;- deneme$Death


formulaR &lt;- jmvcore::constructFormula(terms =  c("LVI", "PNI", "Age"))

formulaL &lt;- jmvcore::constructFormula(terms = "Death")

formula &lt;- paste(formulaL, '~', formulaR)

formula &lt;- as.formula(formula)


table &lt;- tangram::html5(
    tangram::tangram(formula, deneme
                     ))

table
</pre></body></html></div>
<hr>
<div id="arsenal" class="section level2">
<h2 class="hasAnchor">
<a href="#arsenal" class="anchor"></a>arsenal</h2>
<div class="sourceCode" id="cb47"><html><body><pre class="r">arsenal, results='asis', eval=FALSE, include=FALSE

tab1 &lt;- arsenal::tableby(~ Age + Sex, data = deneme)

results &lt;- summary(tab1)


# results$object
# results$control
# results$totals
# results$hasStrata
# results$text
# results$pfootnote
# results$term.name
#
# tab1$Call
#
# tab1$control

tab1$tables # this is where results lie
</pre></body></html></div>
</div>
<div id="define-survival-time" class="section level2">
<h2 class="hasAnchor">
<a href="#define-survival-time" class="anchor"></a>define survival time</h2>
<div class="sourceCode" id="cb48"><html><body><pre class="r">define survival time, eval=FALSE, include=FALSE
mydata$int &lt;- lubridate::interval(
  lubridate::ymd(mydata$SurgeryDate),
  lubridate::ymd(mydata$LastFollowUpDate)
  )
mydata$OverallTime &lt;- lubridate::time_length(mydata$int, "month")
mydata$OverallTime &lt;- round(mydata$OverallTime, digits = 1)</pre></body></html></div>
</div>
<div id="multivariate-analysis-survival" class="section level2">
<h2 class="hasAnchor">
<a href="#multivariate-analysis-survival" class="anchor"></a>Multivariate Analysis Survival</h2>
<div class="sourceCode" id="cb49"><html><body><pre class="r">Multivariate Analysis, eval=FALSE, include=FALSE
library(finalfit)
library(survival)
explanatoryMultivariate &lt;- explanatoryKM
dependentMultivariate &lt;- dependentKM

mydata %&gt;%
  finalfit(dependentMultivariate, explanatoryMultivariate) -&gt; tMultivariate

knitr::kable(tMultivariate, row.names=FALSE, align=c("l", "l", "r", "r", "r", "r"))</pre></body></html></div>
<hr>
<div class="sourceCode" id="cb50"><html><body><pre class="r">eval=FALSE, include=FALSE
# Find arguments in yaml

list_of_yaml &lt;- c(
    list.files(path = "~/histopathRprojects/ClinicoPath-Jamovi--prep/jmv",
               pattern = "\\.yaml$",
               full.names = TRUE,
               all.files = TRUE,
               include.dirs = TRUE,
               recursive = TRUE
    )
)


text_of_yaml_yml &lt;- purrr::map(
    .x = list_of_yaml,
    .f = readLines
)

text_of_yaml_yml &lt;- as.vector(unlist(text_of_yaml_yml))

arglist &lt;-
    stringr::str_extract(
        string = text_of_yaml_yml,
        pattern =
            "([[:alnum:]]*):"
    )

arglist &lt;- arglist[!is.na(arglist)]
arglist &lt;- unique(arglist)
arglist &lt;- gsub(pattern = ":", # remove some characters
                    replacement = "",
                    x = arglist)
arglist &lt;- trimws(arglist) # remove whitespace

cat(arglist, sep = "\n")</pre></body></html></div>
<div class="sourceCode" id="cb51"><html><body><pre class="r">#
#                 # tUni_df_descr &lt;- paste0("When ",
#                 #                         tUni_df$dependent_surv_overall_time_outcome[1],
#                 #                         " is ",
#                 #                         tUni_df$x[2],
#                 #                         ", there is ",
#                 #                         tUni_df$hr_univariable[2],
#                 #                         " times risk than ",
#                 #                         "when ",
#                 #                         tUni_df$dependent_surv_overall_time_outcome[1],
#                 #                         " is ",
#                 #                         tUni_df$x[1],
#                 #                         "."
#                 # )
#
#                 # results5 &lt;- tUni_df_descr</pre></body></html></div>
<div class="sourceCode" id="cb52"><html><body><pre class="r">eval=FALSE, include=FALSE
boot::melanoma
rio::export(x = boot::melanoma, file = "data/melanoma.csv")

survival::colon
rio::export(x = survival::colon, file = "data/colon.csv")

# BreastCancerData &lt;- "https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data"
#
# BreastCancerNames &lt;- "https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.names"
#
# BreastCancerData &lt;- read.csv(file = BreastCancerData, header = FALSE,
#                 col.names = c("id","CT", "UCSize", "UCShape", "MA", "SECS", "BN", "BC", "NN","M", "diagnosis") )

library(mlbench)

data("BreastCancer")
BreastCancer

rio::export(x = BreastCancer, file = "data/BreastCancer.csv")</pre></body></html></div>
<div class="sourceCode" id="cb53"><html><body><pre class="r">pairwise, eval=FALSE, include=FALSE
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
# names(deneme)

mypairwise &lt;-  survminer::pairwise_survdiff(
                            formula = survival::Surv(OverallTime, Outcome) ~ TStage,
                            data = deneme,
                            p.adjust.method = "BH"
                            )


mypairwise2 &lt;- as.data.frame(mypairwise[["p.value"]]) %&gt;%
  tibble::rownames_to_column()

mypairwise2 %&gt;%
  tidyr::pivot_longer(cols = -rowname) %&gt;%
  dplyr::filter(complete.cases(.)) %&gt;%
  dplyr::mutate(description =
                            glue::glue(
                                "The comparison between rowname and name has a p-value of round(value, 2)."
                            )
                    ) %&gt;%
                    dplyr::select(description) %&gt;%
                    dplyr::pull() -&gt; mypairwisedescription

mypairwisedescription &lt;- unlist(mypairwisedescription)

mypairwisedescription &lt;- c(
"In the pairwise comparison of",
mypairwisedescription)</pre></body></html></div>
</div>
<div id="diagrams" class="section level2">
<h2 class="hasAnchor">
<a href="#diagrams" class="anchor"></a>Diagrams</h2>
<div class="sourceCode" id="cb54"><html><body><pre class="r"><span class="no">echo</span><span class="kw">=</span><span class="fl">FALSE</span>
<span class="kw pkg">DiagrammeR</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/DiagrammeR/man/grViz.html">grViz</a></span>(
  <span class="kw">diagram</span> <span class="kw">=</span> <span class="kw pkg">here</span><span class="kw ns">::</span><span class="fu"><a href="https://rdrr.io/pkg/here/man/here.html">here</a></span>(<span class="st">"vignettes/graph.gv"</span>),
  <span class="kw">height</span> <span class="kw">=</span> <span class="fl">200</span>
)</pre></body></html></div>
<div class="sourceCode" id="cb55"><html><body><pre class="r">eval=FALSE, include=FALSE, echo=FALSE
DiagrammeR::mermaid(
  diagram = here::here("vignettes/graph.mmd"),
  height = 200
)</pre></body></html></div>
<pre><code>

Remotes:

    easystats/correlation,
    easystats/report

# Future Works:

## ndphillips/FFTrees

            # gtsummary

            # myvars &lt;- jmvcore::constructFormula(terms = self$options$vars)
            # myvars &lt;- jmvcore::decomposeFormula(formula = myvars)
            # myvars &lt;- unlist(myvars)
            # mytableone2 &lt;- self$data %&gt;%
            #     dplyr::select(myvars)
            # mytableone2 &lt;- gtsummary::tbl_summary(mytableone2)
            # self$results$text2$setContent(mytableone2)



    # - name: outcomeLevel
    #   title: |
    #       Select Event (Death, Recurrence)
    #   type: Level
    #   variable: (outcome)


,
arsenal,

rlang,
knitr,
remotes,
kableExtra,

caret,
irr
Remotes:


easystats/bayestestR,
easystats/performance,
easystats/parameters,
easystats/report
Suggests:
    effectsize,
emmeans,
rmarkdown,
igraph,
iterators,
rms,
commonmark,
sass


# #
# #
# #     if (is.null(self$options$dep) || is.null(self$options$group))
# #         return()
# #
# #     mydata &lt;- self$data
# #
# #     mydep &lt;- self$data[[self$options$dep]]
# #
# #     mygroup &lt;- self$data[[self$options$group]]
# #
# #
# #     # klass &lt;- print(
# #     #     list(
# #     #         "mydep" = c(typeof(mydep), class(mydep)),
# #     #         "mygroup" = c(typeof(mygroup), class(mygroup))
# #     #         )
# #     #     )
# #
# #
# #     # self$results$text1$setContent(klass)
# #
# #
# #     # plotData &lt;- data.frame(gr = mygroup,
# #     #                        dp = mydep)
# #     # plotData &lt;- jmvcore::naOmit(plotData)
# #     # mydata_changes &lt;- plotData %&gt;%
# #     #     dplyr::group_by(gr, dp) %&gt;%
# #     #     dplyr::tally(x = .)
# #     #
# #     # self$results$text2$setContent(mydata_changes)
# #     #
# #     # plotData &lt;- data.frame(gr = mygroup,
# #     #                        dp = mydep)
# #     #
# #     # plotData &lt;- jmvcore::naOmit(plotData)
# #     #
# #     #
# #     # mydata_changes &lt;- plotData %&gt;%
# #     #     dplyr::group_by(gr, dp) %&gt;%
# #     #     dplyr::tally(x = .)
# #     #
# #     #
# #     # deneme &lt;- ggalluvial::is_alluvia_form(
# #     #     as.data.frame(mydata_changes),
# #     #     axes = 1:2, silent = TRUE)
# #
# #     # nodes = data.frame("name" =
# #     #                        c(self$options$group,
# #     #                          self$options$dep))
# #     #
# #     # links &lt;- mydata_changes
# #     #
# #     # names(links) = c("source", "target", "value")
# #     #
# #     # deneme &lt;- networkD3::sankeyNetwork(Links = links, Nodes = nodes,
# #     #                                  Source = "source", Target = "target",
# #     #                                  Value = "value", NodeID = "name",
# #     #                                  fontSize= 12, nodeWidth = 30)
# #
# #
# #
# #     # self$results$text3$setContent(deneme)
# #
# #
# #
# #
# #     # Prepare Data for Plot ----
# #
# #     direction &lt;- self$options$direction
# #
# #     mydata &lt;- self$data
# #
# #     mydep &lt;- self$data[[self$options$dep]]
# #
# #     mygroup &lt;- self$data[[self$options$group]]
# #
# #     contin &lt;- c("integer", "numeric", "double")
# #     categ &lt;- c("factor")
# #
# # # independent, factor, continuous ----
# # # ggbetweenstats    violin plots    for comparisons between groups/conditions
# #     if (direction == "independent" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) %in% contin) {
# #             plotData &lt;- data.frame(gr = mygroup,
# #                                    dp = jmvcore::toNumeric(mydep))
# #
# #
# #
# #
# # # independent, continuous, continuous ----
# # # ggscatterstats    scatterplots    for correlations between two variables
# #
# #     if (direction == "independent" &amp;&amp; class(mygroup) %in% contin &amp;&amp; class(mydep) %in% contin) {
# #             plotData &lt;- data.frame(gr = jmvcore::toNumeric(mygroup),
# #                                    dp = jmvcore::toNumeric(mydep))
# #
# #
# #
# #
# #
# # # independent, factor, factor ----
# # # ggbarstats    bar charts  for categorical data
# #     if (direction == "independent" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) == "factor") {
# #
# #             plotData &lt;- data.frame(gr = mygroup,
# #                                    dp = mydep)
# #
# #
# #
# #     # independent, continuous, factor ----
# #
# #     if (direction == "independent" &amp;&amp; class(mygroup) %in% contin &amp;&amp; class(mydep) == "factor") {
# #
# #         stop("Please switch the values: factor variable should be on x-axis and continuous variable should be on y-axis")
# #         }
# #
# #
# #
# #     # repeated, factor, continuous ----
# #     # ggwithinstats     violin plots    for comparisons within groups/conditions
# #
# #
# #
# #     if (direction == "repeated" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) %in% contin) {
# #             plotData &lt;- data.frame(gr = mygroup,
# #                                    dp = jmvcore::toNumeric(mydep))
# #
# #
# #
# #
# #     # repeated, continuous, continuous ----
# #     # rmcorr::rmcorr()
# #
# #
# #     if (direction == "repeated" &amp;&amp; class(mygroup) %in% contin &amp;&amp; class(mydep) %in% contin) {
# #
# #
# #         stop("Currently this module does not support repeated measures correlation.")
# #
# #     }
# #
# #
# #     # repeated, factor, factor ----
# #     # http://corybrunson.github.io/ggalluvial/
# #
# #     if (direction == "repeated" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) == "factor") {
# #             plotData &lt;- data.frame(gr = mygroup,
# #                                    dp = mydep)
# #
# #
# #
# #     # repeated, continuous, factor ----
# #
# #     if (direction == "repeated" &amp;&amp; class(mygroup) %in% contin &amp;&amp; class(mydep) == "factor") {
# #
# 
# 
# 
# 
# 
# # Results ----
# 
# 
# 
# # Send Data to Plot ----
# 
# # plotData &lt;- jmvcore::naOmit(plotData)
# # image &lt;- self$results$plot
# # image$setState(plotData)
# 
# 
# # }
# 
# 
# # ,
# #
# # .plot = function(image, ...) {  # &lt;-- the plot function ----
# #
# #
# #     if (is.null(self$options$dep) || is.null(self$options$group))
# #         return()
# #
# #
# #     plotData &lt;- image$state
# #
# #     direction &lt;- self$options$direction
# #
# #     mydata &lt;- self$data
# #
# #     mydep &lt;- self$data[[self$options$dep]]
# #
# #     mygroup &lt;- self$data[[self$options$group]]
# #
# #     contin &lt;- c("integer", "numeric", "double")
# #     categ &lt;- c("factor")
# #
# #     # independent, factor, continuous ----
# #     # ggbetweenstats    violin plots    for comparisons between groups/conditions
# #
# #     if (direction == "independent" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) %in% contin) {
# #
# #             plot &lt;- ggstatsplot::ggbetweenstats(
# #                 data = plotData,
# #                 x = gr,
# #                 y = dp
# #             )
# #         }
# #
# #     # independent, continuous, continuous ----
# #     # ggscatterstats    scatterplots    for correlations between two variables
# #
# #
# #         if (direction == "independent" &amp;&amp; class(mygroup) %in% contin &amp;&amp; class(mydep) %in% contin) {
# #
# #             plot &lt;- ggstatsplot::ggscatterstats(
# #                 data = plotData,
# #                 x = gr,
# #                 y = dp
# #             )
# #
# #         }
# #
# #     # independent, factor, factor ----
# #     # ggbarstats    bar charts  for categorical data
# #
# #
# #     if (direction == "independent" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) == "factor") {
# #
# #
# #
# #             plot &lt;- ggstatsplot::ggbarstats(
# #                                     data = plotData,
# #                                     main = gr,
# #                                     condition = dp
# #                                 )
# #         }
# #
# #     # repeated, factor, continuous ----
# #     # ggwithinstats     violin plots    for comparisons within groups/conditions
# #
# #
# # if (direction == "repeated" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) %in% contin) {
# #
# #
# #             plot &lt;- ggstatsplot::ggwithinstats(
# #                 data = plotData,
# #                 x = gr,
# #                 y = dp
# #             )
# #
# #         }
# #
# #     # repeated, continuous, continuous ----
# #     # rmcorr::rmcorr()
# #
# #             # my.rmc &lt;- rmcorr::rmcorr(participant = Subject,
# #             #                          measure1 = PacO2,
# #             #                          measure2 = pH,
# #             #                          dataset = rmcorr::bland1995)
# #             #
# #             # plot(my.rmc, overall = TRUE)
# #             #
# #             # ggplot2::ggplot(rmcorr::bland1995,
# #             #                 ggplot2::aes(x = PacO2,
# #             #                              y = pH,
# #             #                              group = factor(Subject),
# #             #                              color = factor(Subject)
# #             #                 )
# #             # ) +
# #             #     ggplot2::geom_point(ggplot2::aes(colour = factor(Subject))) +
# #             #     ggplot2::geom_line(ggplot2::aes(y = my.rmc$model$fitted.values), linetype = 1)
# #
# #
# #
# #     # repeated, factor, factor ----
# #     # http://corybrunson.github.io/ggalluvial/
# #     # networkD3
# #
# #
# #     if (direction == "repeated" &amp;&amp; class(mygroup) == "factor" &amp;&amp; class(mydep) == "factor") {
# #
# #
# #             mydata_changes &lt;- plotData %&gt;%
# #                 dplyr::group_by(gr, dp) %&gt;%
# #                 dplyr::tally(x = .)
# #
# #
# #             # head(as.data.frame(UCBAdmissions), n = 12)
# #
# #             # ggalluvial::is_alluvia_form(
# #             #     as.data.frame(UCBAdmissions),
# #             #     axes = 1:3, silent = TRUE)
# #
# #
# #
# #             # plot &lt;- ggplot(as.data.frame(UCBAdmissions),
# #             #        aes(y = Freq, axis1 = Gender, axis2 = Dept)) +
# #             #     geom_alluvium(aes(fill = Admit), width = 1/12) +
# #             #     geom_stratum(width = 1/12, fill = "black", color = "grey") +
# #             #     geom_label(stat = "stratum", infer.label = TRUE) +
# #             #     scale_x_discrete(limits = c("Gender", "Dept"), expand = c(.05, .05)) +
# #             #     scale_fill_brewer(type = "qual", palette = "Set1") +
# #             #     ggtitle("UC Berkeley admissions and rejections, by sex and department")
# #
# #
# #
# #
# #
# #             stratum &lt;- ggalluvial::StatStratum
# #
# #             plot &lt;- ggplot2::ggplot(data = mydata_changes,
# #                                     ggplot2::aes(axis1 = gr,
# #                        axis2 = dp,
# #                        y = n)) +
# #                 ggplot2::scale_x_discrete(limits = c(self$options$group, self$options$dep),
# #                                  expand = c(.1, .05)
# #                 ) +
# #                 ggplot2::xlab(self$options$group) +
# #                 ggalluvial::geom_alluvium(ggplot2::aes(fill = gr,
# #                                   colour = gr
# #                 )) +
# #                 ggalluvial::geom_stratum() +
# #                 ggalluvial::stat_stratum(geom = "stratum") +
# #                 ggplot2::geom_label(stat = stratum, infer.label = TRUE) +
# #
# #                 # ggalluvial::geom_stratum(stat = "stratum", label.strata = TRUE) +
# #                 # ggplot2::geom_text(stat = "stratum", infer.label = TRUE) +
# #                 # ggplot2::geom_text(label.strata = TRUE) +
# #                 # ggalluvial::geom_stratum()
# #                 ggplot2::theme_minimal()
# #                 # ggplot2::ggtitle(paste0("Changes in ", self$options$group))
# #             #
# #             #
# #             # nodes = data.frame("name" =
# #             #                        c(self$options$group,
# #             #                          self$options$dep))
# #             #
# #             # links &lt;- mydata_changes
# #             #
# #             # names(links) = c("source", "target", "value")
# #             #
# #             # plot &lt;- networkD3::sankeyNetwork(Links = links, Nodes = nodes,
# #             #               Source = "source", Target = "target",
# #             #               Value = "value", NodeID = "name",
# #             #               fontSize= 12, nodeWidth = 30)
# #
# #             # library(networkD3)
# #             # nodes = data.frame("name" =
# #             #                        c("Node A", # Node 0
# #             #                          "Node B", # Node 1
# #             #                          "Node C", # Node 2
# #             #                          "Node D"))# Node 3
# #             # links = as.data.frame(matrix(c(
# #             #     0, 1, 10, # Each row represents a link. The first number
# #             #     0, 2, 20, # represents the node being conntected from.
# #             #     1, 3, 30, # the second number represents the node connected to.
# #             #     2, 3, 40),# The third number is the value of the node
# #             #     byrow = TRUE, ncol = 3))
# #             # names(links) = c("source", "target", "value")
# #             # sankeyNetwork(Links = links, Nodes = nodes,
# #             #               Source = "source", Target = "target",
# #             #               Value = "value", NodeID = "name",
# #             #               fontSize= 12, nodeWidth = 30)
# #
# #             # plot &lt;- c("Under Construction")
# #
# #             # plot &lt;- list(plot1,
# #             #              plot2)
# #
# #
# #
# #         }
# #
# #
# #
# #     print(plot)
# #     TRUE
# #
# # }
# #
# #         )
# # )


# Packages


Imports: 
    jmvcore (&gt;= 0.8.5),
    R6,
    dplyr,
    survival,
    survminer,
    finalfit,
    arsenal,
    purrr,
    glue,
    janitor,
    ggplot2,
    forcats,
    ggstatsplot,
    tableone,
    explore,
    tangram,
    irr,
    rlang,
    tidyselect,
    knitr



Remotes:
    easystats/correlation,
    neuropsychology/psycho.R@0.4.0


Suggests:
    rmarkdown,
    remotes,
    devtools,
    lubridate,
    broom, 
    GGally, 
    gridExtra, 
    Hmisc, 
    lme4, 
    magrittr, 
    mice, 
    pillar, 
    pROC, 
    scales, 
    stringr, 
    tibble, 
    tidyr, 
    covr, 
    cmprsk, 
    readr, 
    rstan, 
    survey, 
    testthat, 
    backports, 
    generics, 
    assertthat, 
    pkgconfig, 
    Rcpp, 
    BH, 
    plogr, 
    ellipsis, 
    gtable, 
    progress, 
    RColorBrewer, 
    reshape, 
    digest, 
    lazyeval, 
    viridisLite, 
    withr, 
    Formula, 
    latticeExtra, 
    acepack, 
    data.table, 
    htmlTable, 
    viridis, 
    htmltools, 
    base64enc, 
    minqa, 
    nloptr, 
    RcppEigen, 
    mitml, 
    cli, 
    crayon, 
    fansi, 
    utf8, 
    vctrs, 
    farver, 
    labeling, 
    munsell, 
    lifecycle, 
    stringi, 
    ggpubr, 
    maxstat, 
    survMisc, 
    jsonlite, 
    rex, 
    evaluate, 
    highr, 
    markdown, 
    xfun, 
    hms, 
    clipr, 
    mime, 
    tinytex, 
    StanHeaders, 
    inline, 
    loo, 
    pkgbuild, 
    numDeriv, 
    mitools, 
    pkgload, 
    praise, 
    zeallot, 
    colorspace, 
    prettyunits, 
    checkmate, 
    htmlwidgets, 
    pan, 
    jomo, 
    ordinal, 
    ucminf, 
    ggrepel,
    ggsci, 
    cowplot, 
    ggsignif,
    polynom, 
    exactRankTests,
    mvtnorm, 
    KMsurv, 
    zoo, 
    km.ci,
    xtable,
    curl, 
    openssl, 
    askpass, 
    sys, 
    matrixStats,
    callr, 
    desc,
    rprojroot,
    processx, 
    ps, 
    DBI,
    png, 
    jpeg, 
    boot, 
    grid, 
    snakecase,
    caret,
    iterators,
    timeDate,
    foreach,
    plyr,
    ModelMetrics,
    nlme,
    reshape2,
    recipes,
    BradleyTerry2,
    e1071,
    earth,
    fastICA,
    gam,
    ipred,
    kernlab,
    klaR,
    MASS,
    ellipse,
    mda,
    mgcv,
    mlbench,
    MLmetrics,
    nnet,
    party,
    pls,
    proxy,
    randomForest,
    RANN,
    spls,
    subselect,
    pamr,
    superpc,
    Cubist,
    rpart,
    qgraph,
    nFactors,
    ppcor,
    rstanarm,
    MuMIn,
    blavaan,
    
    
    
    
    



# Develop



# install.packages('jmvtools', repos=c('https://repo.jamovi.org', 'https://cran.r-project.org'))

# jmvtools::check("C://Program Files//jamovi//bin")

# jmvtools::install(home = "C://Program Files//jamovi//bin")
# 
# jmvtools::install(pkg = "C://ClinicoPath", home = "C://Program Files//jamovi//bin")

# devtools::build(path = "C:\\ClinicoPathOutput")

# .libPaths(new = "C:\\ClinicoPathLibrary")

# devtools::build(path = "C:\\ClinicoPathOutput", binary = TRUE, args = c('--preclean'))

Sys.setenv(TZ = "Europe/Istanbul")

library("jmvtools")

jmvtools::check()

# rhub::check_on_macos()

# rhub::check_for_cran()

# codemetar::write_codemeta()


devtools::check()


# From CRAN
# install.packages("attachment")
# From github
# remotes::install_github("ThinkR-open/attachment")

# If you correctly called the package dependencies in the {roxygen2} skeleton, in your functions, in your Rmarkdown vignettes and in your tests, you only need to run attachment::att_to_description()just before devtools::check(). And that’s it, there is nothing else to remember !
# attachment::att_to_description()



devtools::document()

codemetar::write_codemeta()

# rmarkdown::render('/Users/serdarbalciold/histopathRprojects/ClinicoPath/README.Rmd',  encoding = 'UTF-8', knit_root_dir = '~/histopathRprojects/ClinicoPath', quiet = TRUE)


pkgdown::build_articles()
# pkgdown::build_favicons()
pkgdown::build_home()
pkgdown::build_news()
pkgdown::build_reference()
# pkgdown::build_reference_index()
# pkgdown::build_tutorials()

pkgdown::build_site()

# devtools::github_release()


# gitUpdateCommitPush
CommitMessage &lt;- paste("updated on ", Sys.time(), sep = "")
wd &lt;- getwd()
gitCommand &lt;- paste("cd ", wd, " \n git add . \n git commit --message '", CommitMessage, "' --no-verify \n git push origin master \n", sep = "")
# gitCommand &lt;- paste("cd ", wd, " \n git add . \n git commit --no-verify --message '", CommitMessage, "' \n git push origin master \n", sep = "")
system(command = gitCommand, intern = TRUE)



# jmvtools::install()
# 
# jmvtools::create('SuperAwesome')
# 
# jmvtools::addAnalysis(name='ttest', title='Independent Samples T-Test')
# 
# jmvtools::addAnalysis(name='survival', title='survival')
# 
# jmvtools::addAnalysis(name='correlation', title='correlation')
# 
# jmvtools::addAnalysis(name='tableone', title='TableOne')
# 
# jmvtools::addAnalysis(name='crosstable', title='CrossTable')
# 
# 
# jmvtools::addAnalysis(name='writesummary', title='WriteSummary')

# jmvtools::addAnalysis(name='finalfit', title='FinalFit')

# jmvtools::addAnalysis(name='multisurvival', title='FinalFit Multivariate Survival')

# jmvtools::addAnalysis(name='report', title='Report General Features')

# jmvtools::addAnalysis(name='frequencies', title='Frequencies')

# jmvtools::addAnalysis(name='statsplot', title='GGStatsPlot')

# jmvtools::addAnalysis(name='statsplot2', title='GGStatsPlot2')

# jmvtools::addAnalysis(name='statsplotbetween', title='Stats Plot Between')

# jmvtools::addAnalysis(name='competingsurvival', title='Competing Survival')


# jmvtools::addAnalysis(name='scat2', title='scat2')

# jmvtools::addAnalysis(name='decisioncalculator', title='Decision Calculator')

# jmvtools::addAnalysis(name='agreement', title='Interrater Intrarater Reliability')

# jmvtools::addAnalysis(name='cluster', title='Cluster Analysis')

# jmvtools::addAnalysis(name='tree', title='Decision Tree')
# 
# jmvtools::addAnalysis(name='oddsratio', title='Odds Ratio Table and Plot')

# jmvtools::addAnalysis(name='roc', title='ROC')

# jmvtools::addAnalysis(name = "icccoeff", title = "ICC coefficients")

# jmvtools::addAnalysis(name = "gtsummary", title = "Tables via gtsummary")

# jmvtools::addAnalysis(name = "alluvial", title = "Alluvial Diagrams")



Sys.unsetenv("R_PROFILE_USER")
devtools::check()

devtools::install()

# jmvtools::check()
jmvtools::install()

formula &lt;- jmvcore::constructFormula(terms = c("A", "B", "C"), dep = "D")

jmvcore::constructFormula(terms = list("A", "B", c("C", "D")), dep = "E")

jmvcore::constructFormula(terms = "A B")


jmvcore::constructFormula(terms = list("A", "B", "C"))

vars &lt;- jmvcore::decomposeFormula(formula = formula) 

unlist(vars)

cformula &lt;- jmvcore::composeTerm(components = formula)

jmvcore::composeTerm("A B")

jmvcore::composeTerm(components = c("A", "B", "C"))

jmvcore::decomposeTerm(term = c("A", "B", "C"))

jmvcore::decomposeTerm(term = formula)

jmvcore::decomposeTerm(term = cformula)



composeTerm &lt;- jmvcore::composeTerm(components = c("A", "B", "C"))

jmvcore::decomposeTerm(term = composeTerm)




BreastCancer &lt;- readr::read_csv(file = "/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/BreastCancer.csv")

usethis::use_data(BreastCancer)

BreastCancer &lt;- readr::read_csv(file = "/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/BreastCancer.csv")

usethis::use_data(BreastCancer)

colon &lt;- readr::read_csv(file = 
"/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/colon.csv")

usethis::use_data(colon)


melanoma &lt;- readr::read_csv(file = 
"/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/melanoma.csv")

usethis::use_data(melanoma)


rocdata &lt;- readr::read_csv(file = 
"/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/rocdata.csv")

usethis::use_data(rocdata)

histopathology &lt;- readr::read_csv(file = 
"/Users/serdarbalciold/histopathRprojects/ClinicoPath/data/histopathology.csv")

usethis::use_data(histopathology)




## force git


# gitUpdateCommitPush
CommitMessage &lt;- paste("updated on ", Sys.time(), sep = "")
wd &lt;- getwd()
gitCommand &lt;- paste("cd ", wd, " \n git add . \n git commit --message '", CommitMessage, "' \n git push origin master \n", sep = "")
system(command = gitCommand, intern = TRUE)




## update project for release



readyfunctions &lt;- c(
    "refs",
    # "^agreement",
    # "^competingsurvival",
    # "^correlation",
    "^crosstable",
    # "^decision",
    # "^decisioncalculator",
    # "^icccoeff",
    "^multisurvival",
    "^oddsratio",
    # "^pairchi2",
    "^reportcat",
    # "^roc",
    "^statsplot2",
    "^summarydata",
    "^survival",
    "^tableone"
    # "^tree",
    # "^utils-pipe"
    # "^vartree"
)


readyfunctions &lt;- paste0(readyfunctions, collapse = "|")

files_R &lt;-
    list.files(path = here::here("R"),
               pattern = readyfunctions,
               full.names = TRUE)

files_jamovi &lt;-
    list.files(
        path = here::here("jamovi"),
        pattern = readyfunctions,
        full.names = TRUE
    )

files_data &lt;-
    list.files(
        path = here::here("data"),
        full.names = TRUE
    )


file.copy(from = files_R,
          to = "~/ClinicoPath/R/",
          overwrite = TRUE)


file.copy(from = files_jamovi,
          to = "~/ClinicoPath/jamovi/",
          overwrite = TRUE)


file.copy(from = files_data,
          to = "~/ClinicoPath/data/",
          overwrite = TRUE)

file.copy(from = files_data,
          to = "~/histopathRprojects/ClinicoPath/inst/extdata/",
          overwrite = TRUE)


# Example



deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

library(magrittr)

corx &lt;- deneme %&gt;%
                dplyr::select(Age, OverallTime) %&gt;% 
                stats::cor(method = "spearman") %&gt;%
                report::report()











inherits(deneme$Sex, "character")



ggstatsplot::ggbetweenstats(data = deneme,
                            x = Sex,
                            y = Age,
                            type = "p")

ClinicoPath::statsplot2(
    data = deneme,
    dep = Age,
    group = Sex)






devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

# library("ClinicoPath")

deneme$Age &lt;- as.numeric(as.character(deneme$Age))

ClinicoPath::writesummary(data = deneme, vars = Age)

ggstatsplot::normality_message(deneme$Age, "Age")


ClinicoPath::writesummary(
    data = deneme,
    vars = Age)


devtools::install(upgrade = FALSE, quick = TRUE)
library(dplyr)
library(survival)
library(finalfit)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ClinicoPath::finalfit(data = deneme,
                      explanatory = Sex,
                      outcome = Outcome,
                      overalltime = OverallTime)

devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

ClinicoPath::decision(
    data = deneme,
    gold = Outcome,
    goldPositive = "1",
    newtest = Smoker,
    testPositive = "TRUE")

ClinicoPath::decision(
    data = deneme,
    gold = LVI,
    goldPositive = "Present",
    newtest = PNI,
    testPositive = "Present")

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ggstatsplot::ggbetweenstats(data = deneme, 
                            x = LVI,
                            y = Age)



devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
ClinicoPath::statsplot(
    data = deneme,
    dep = Age,
    group = Smoker)

mytable &lt;- table(deneme$Outcome, deneme$Smoker)

caret::confusionMatrix(mytable)
confusionMatrix(pred, truth)
confusionMatrix(xtab, prevalence = 0.25)

levels(deneme$Outcome)

mytable[1,2]

d &lt;- "0"

mytable[d, "FALSE"]

mytable[[0]]


formula &lt;- jmvcore::constructFormula(terms = c("A", "B", "C"))

jmvcore::constructFormula(terms = list("A", "B", "C"))

vars &lt;- jmvcore::decomposeFormula(formula = formula) 

vars &lt;- jmvcore::decomposeTerms(vars)


vars &lt;- unlist(vars)

formula &lt;- as.formula(formula)


my_group &lt;- "lvi"

jmvcore::composeTerm(my_group)


my_dep &lt;- "age"

formula &lt;- paste0('x = ', group, 'y = ', dep)
myformula &lt;- as.formula(formula)

myformula &lt;- glueformula::gf({my_group}, {my_dep})

myformula &lt;- glue::glue( 'x = ' , {my_group}, ', y = ' , {my_dep})

myformula &lt;- jmvcore::composeTerm(myformula)



deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

library(survival)
km_fit &lt;- survfit(Surv(OverallTime, Outcome) ~ LVI, data = deneme)

library(dplyr)
km_fit_median_df &lt;- summary(km_fit)
km_fit_median_df &lt;- as.data.frame(km_fit_median_df$table) %&gt;%
                janitor::clean_names(dat = ., case = "snake") %&gt;%
                tibble::rownames_to_column(.data = ., var = "LVI")


library(dplyr)
library(survival)

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

myoveralltime &lt;- deneme$OverallTime
myoutcome &lt;- deneme$Outcome
myexplanatory &lt;- deneme$LVI

class(myoveralltime)
class(myoutcome)
typeof(myexplanatory)

is.ordered(myexplanatory)

formula2 &lt;- jmvcore::constructFormula(terms = "myexplanatory")
# formula2 &lt;- jmvcore::decomposeFormula(formula = formula2)
# formula2 &lt;- paste("", formula2)
# formula2 &lt;- as.formula(formula2)
formula2 &lt;- jmvcore::composeTerm(formula2)


formulaL &lt;- jmvcore::constructFormula(terms = "myoveralltime")
# formulaL &lt;- jmvcore::decomposeFormula(formula = formulaL)

formulaR &lt;- jmvcore::constructFormula(terms = "myoutcome")
# formulaR &lt;- jmvcore::decomposeFormula(formula = formulaR)

formula &lt;- paste("Surv(", formulaL, ",", formulaR, ")")
# formula &lt;- jmvcore::composeTerm(formula)
# formula &lt;- as.formula(formula)
# jmvcore::constructFormula(terms = c(formula, formula2))

deneme %&gt;%
  finalfit::finalfit(formula, formula2) -&gt; tUni

tUni

library(dplyr)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

results &lt;- deneme %&gt;%
                ggstatsplot::ggbetweenstats(LVI, Age)
results

mydep &lt;- deneme$Age
mygroup &lt;- deneme$LVI


mygroup &lt;- jmvcore::constructFormula(terms = "mygroup")
mygroup &lt;- jmvcore::composeTerm(mygroup)

mydep &lt;- jmvcore::constructFormula(terms = "mydep")
mydep &lt;- jmvcore::composeTerm(mydep)


# not working
# eval(mygroup)
# rlang::eval_tidy(mygroup)
# !!mygroup
# {{mygroup}}
# sym(mygroup)
# quote(mygroup)
# enexpr(mygroup)

mygroup &lt;- jmvcore::constructFormula(terms = "mygroup")
mydep &lt;- jmvcore::constructFormula(terms = "mydep")

formula1 &lt;- paste(mydep)
formula1 &lt;- jmvcore::composeTerm(formula1)


mygroup &lt;- paste(mygroup)
mygroup &lt;- jmvcore::composeTerm(mygroup)

mydep &lt;- deneme$Age
mygroup &lt;- deneme$LVI

mydep &lt;- jmvcore::resolveQuo(jmvcore::enquo(mydep))
mygroup &lt;- jmvcore::resolveQuo(jmvcore::enquo(mygroup))

mydata2 &lt;- data.frame(mygroup=mygroup, mydep=mydep)

results &lt;- mydata2 %&gt;%
                ggstatsplot::ggbetweenstats(
x = mygroup, y = mydep  )

results



myformula &lt;- glue::glue('x = ', {mygroup}, ', y = ' , {mydep})

myformula &lt;- jmvcore::composeTerm(myformula)

myformula &lt;- as.formula(myformula)



mydep2 &lt;- quote(mydep)
mygroup2 &lt;- quote(mygroup)


results &lt;- deneme %&gt;%
                ggstatsplot::ggbetweenstats(!!mygroup2, !!mydep2)
results


formula &lt;- jmvcore::constructFormula(terms = c("myoveralltime", "myoutcome"))

vars &lt;- jmvcore::decomposeFormula(formula = formula) 


explanatory &lt;- jmvcore::constructFormula(terms = c("explanatory"))    

explanatory &lt;- jmvcore::decomposeFormula(formula = explanatory)

explanatory &lt;- unlist(explanatory)

myformula &lt;- paste("Surv(", vars[1], ", ", vars[2], ")")



deneme %&gt;%
finalfit::finalfit(myformula, explanatory) -&gt; tUni


deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))


table3 &lt;-
  tangram::html5(
    tangram::tangram(
      "Death ~ LVI + PNI + Age", deneme),
    fragment=TRUE,
    # style = "hmisc",
    style = "nejm",
    # inline="nejm.css",
    caption = "HTML5 Table",
    id="tbl3")

table3

mydep &lt;- deneme$Age
mygroup &lt;- deneme$Death


formulaR &lt;- jmvcore::constructFormula(terms =  c("LVI", "PNI", "Age"))

formulaL &lt;- jmvcore::constructFormula(terms = "Death")

formula &lt;- paste(formulaL, '~', formulaR)

# formula &lt;- as.formula(formula)

sty &lt;- jmvcore::composeTerm(components = "nejm")

gr &lt;- jmvcore::composeTerm(components = "Death")


table &lt;- tangram::html5(
    tangram::tangram(formula, deneme
                     ),
    fragment=TRUE,
    # style = "hmisc",
    # style = "nejm",
    style = sty,
    # inline="nejm.css",
    caption = paste0("HTML5 Table ", gr),
    id="tbl4")

table



deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))


mydata &lt;- deneme

formula2 &lt;- jmvcore::constructFormula(terms = c("LVI", "PNI", "Age"))

formulaR &lt;- jmvcore::constructFormula(terms = "Death")

formulaR &lt;- jmvcore::toNumeric(formulaR)



plot &lt;-
                finalfit::or_plot(
                    .data = mydata,
                    dependent = formulaR,
                    explanatory = formula2,
                    remove_ref = FALSE,
                    table_text_size = 4,
                    title_text_size = 14,
                    random_effect = NULL,
                    factorlist = NULL,
                    glmfit = NULL,
                    confint_type = NULL,
                    breaks = NULL,
                    column_space = c(-0.5, 0, 0.5),
                    dependent_label = "Death",
                    prefix = "",
                    suffix = ": OR (95% CI, p-value)",
                    table_opts = NULL,
                    plot_opts = list(
                    ggplot2::xlab("OR, 95% CI"),
                    ggplot2::theme(
                    axis.title = ggplot2::element_text(size = 12)
                    )
                    )
                    )



# Other Codes



## arsenal


tab1 &lt;- arsenal::tableby(~ Age + Sex, data = deneme)

results &lt;- summary(tab1)


# results$object
# results$control
# results$totals
# results$hasStrata
# results$text
# results$pfootnote
# results$term.name
# 
# tab1$Call
# 
# tab1$control

tab1$tables # this is where results lie





## define survival time


mydata$int &lt;- lubridate::interval(
  lubridate::ymd(mydata$SurgeryDate),
  lubridate::ymd(mydata$LastFollowUpDate)
  )
mydata$OverallTime &lt;- lubridate::time_length(mydata$int, "month")
mydata$OverallTime &lt;- round(mydata$OverallTime, digits = 1)





## Multivariate Analysis Survival



library(finalfit)
library(survival)
explanatoryMultivariate &lt;- explanatoryKM
dependentMultivariate &lt;- dependentKM

mydata %&gt;%
  finalfit(dependentMultivariate, explanatoryMultivariate) -&gt; tMultivariate

knitr::kable(tMultivariate, row.names=FALSE, align=c("l", "l", "r", "r", "r", "r"))


# Find arguments in yaml

list_of_yaml &lt;- c(
    list.files(path = "~/histopathRprojects/ClinicoPath-Jamovi--prep/jmv",
               pattern = "\\.yaml$",
               full.names = TRUE,
               all.files = TRUE,
               include.dirs = TRUE,
               recursive = TRUE
    )
)


text_of_yaml_yml &lt;- purrr::map(
    .x = list_of_yaml,
    .f = readLines
)

text_of_yaml_yml &lt;- as.vector(unlist(text_of_yaml_yml)) 

arglist &lt;-
    stringr::str_extract(
        string = text_of_yaml_yml, 
        pattern = 
            "([[:alnum:]]*):"
    )

arglist &lt;- arglist[!is.na(arglist)]
arglist &lt;- unique(arglist)
arglist &lt;- gsub(pattern = ":", # remove some characters
                    replacement = "",
                    x = arglist)
arglist &lt;- trimws(arglist) # remove whitespace

cat(arglist, sep = "\n")


#
#                 # tUni_df_descr &lt;- paste0("When ",
#                 #                         tUni_df$dependent_surv_overall_time_outcome[1],
#                 #                         " is ",
#                 #                         tUni_df$x[2],
#                 #                         ", there is ",
#                 #                         tUni_df$hr_univariable[2],
#                 #                         " times risk than ",
#                 #                         "when ",
#                 #                         tUni_df$dependent_surv_overall_time_outcome[1],
#                 #                         " is ",
#                 #                         tUni_df$x[1],
#                 #                         "."
#                 # )
#
#                 # results5 &lt;- tUni_df_descr



boot::melanoma
rio::export(x = boot::melanoma, file = "data/melanoma.csv")

survival::colon
rio::export(x = survival::colon, file = "data/colon.csv")

# BreastCancerData &lt;- "https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.data"
# 
# BreastCancerNames &lt;- "https://archive.ics.uci.edu/ml/machine-learning-databases/breast-cancer-wisconsin/breast-cancer-wisconsin.names"
# 
# BreastCancerData &lt;- read.csv(file = BreastCancerData, header = FALSE,
#                 col.names = c("id","CT", "UCSize", "UCShape", "MA", "SECS", "BN", "BC", "NN","M", "diagnosis") )

library(mlbench)

data("BreastCancer")
BreastCancer

rio::export(x = BreastCancer, file = "data/BreastCancer.csv")



deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))
# names(deneme)

mypairwise &lt;-  survminer::pairwise_survdiff(
                            formula = survival::Surv(OverallTime, Outcome) ~ TStage,
                            data = deneme,
                            p.adjust.method = "BH"
                            )


mypairwise2 &lt;- as.data.frame(mypairwise[["p.value"]]) %&gt;% 
  tibble::rownames_to_column()

mypairwise2 %&gt;% 
  tidyr::pivot_longer(cols = -rowname) %&gt;% 
  dplyr::filter(complete.cases(.)) %&gt;% 
  dplyr::mutate(description =
                            glue::glue(
                                "The comparison between {rowname} and {name} has a p-value of {round(value, 2)}."
                            )
                    ) %&gt;% 
                    dplyr::select(description) %&gt;%
                    dplyr::pull() -&gt; mypairwisedescription

mypairwisedescription &lt;- unlist(mypairwisedescription)

mypairwisedescription &lt;- c(
"In the pairwise comparison of",
mypairwisedescription)



            # mydata &lt;- self$data

            # mydep &lt;- self$data[[self$options$dep]]
            # mygroup &lt;- self$data[[self$options$group]]
            #
            #
            # plotData &lt;- data.frame(gr = mygroup, dp = jmvcore::toNumeric(mydep))
            # plotData &lt;- jmvcore::naOmit(plotData)
            #
            # image &lt;- self$results$plot
            #
            # image$setState(plotData)


            # self$results$text1$setContent(plotData)


            # mydepType &lt;- data.frame(vclass = class(mydep),
            #                         vtypeof = typeof(mydep),
            #                         vordered = is.ordered(mydep),
            #                         vfactor = is.factor(mydep),
            #                         vnumeric = is.numeric(mydep),
            #                         vdouble = is.double(mydep),
            #                         vcharacter = is.character(mydep),
            #                         vdate = lubridate::is.Date(mydep),
            #                         vdate2 = is.na.POSIXlt(mydep)
            #                         )
            # mygroupType &lt;- class(mygroup)
            # variableTypes &lt;- list(mydepType, mygroupType)
            # self$results$text1$setContent(variableTypes)

            # plotData &lt;- image$state


            # https://indrajeetpatil.github.io/ggstatsplot/
            # ggbetweenstats    violin plots    for comparisons between groups/conditions
            # ggwithinstats     violin plots    for comparisons within groups/conditions
            #
            # ggdotplotstats    dot plots/charts    for distribution about labeled numeric variable
            #
            # ggbarstats    bar charts  for categorical data
            #
            # ggscatterstats    scatterplots    for correlations between two variables

            # http://corybrunson.github.io/ggalluvial/


            # plot &lt;- ggplot(plotData, aes(x = gr,
            #                              y = dp)) +
            #     geom_point()

            # plot &lt;- plotData %&gt;%
            #     ggstatsplot::ggbetweenstats(
            #         x = gr,
            #         y = dp
            #         )

library(readr)
BreastCancer &lt;- read_csv("data/BreastCancer.csv")
View(BreastCancer)



mytarget &lt;- "Class"
myvars &lt;- c("Cl.thickness",
            "Cell.size",
            "Cell.shape",
            "Marg.adhesion",
            "Epith.c.size",
            "Bare.nuclei",
            "Bl.cromatin",
            "Normal.nucleoli",
            "Mitoses")

mydata &lt;- BreastCancer %&gt;% 
    select(mytarget, myvars)

formula &lt;- jmvcore::constructFormula(terms = mytarget)

formula &lt;- paste(formula, '~ .')

formula &lt;- as.formula(formula)

 # Create an FFTrees object from the data
 FFTrees.fft &lt;- FFTrees::FFTrees(
     formula = formula,
     data = mydata
     )

 # Plot the best tree applied to the test data
 plot2 &lt;- plot(FFTrees.fft,
      data = mydata
      # ,
      # main = "Heart Disease",
      # decision.labels = c("Healthy", "Disease")
                 )


devtools::install(upgrade = FALSE, quick = TRUE)


deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))


ClinicoPath::statsplotbetween(
    data = deneme,
    dep = LVI,
    group = PNI)

myirr &lt;- data.frame(
          Rater1 = c(0L,1L,1L,0L,0L,0L,1L,1L,1L,0L,1L,
                 1L,1L,1L,1L,0L,NA,1L,1L,0L,0L,1L,1L,1L,1L,1L,0L,
                 1L,1L,1L,1L,0L,1L,1L,1L,1L,1L,0L,0L,1L,1L,1L,
                 1L,1L,0L,1L,1L,1L,0L,0L,1L,1L,1L,0L,1L,1L,1L,0L,
                 1L,1L,0L,1L,0L,1L,1L,0L,0L,1L,0L,1L,1L,1L,0L,0L,
                 0L,0L,1L,1L,1L,0L,0L,1L,1L,1L,1L,0L,0L,0L,1L,0L,
                 0L,1L,1L,0L,1L,1L,0L,1L,1L,0L,1L,1L,0L,1L,1L,
                 0L,1L,1L,1L,0L,1L,1L,1L,0L,1L,1L,0L,0L,1L,0L,1L,
                 1L,1L,0L,1L,1L,1L,1L,1L,1L,1L,1L,0L,1L,1L,1L,1L,
                 1L,1L,1L,1L,1L,1L,0L,1L,1L,1L,1L,1L,1L,1L,0L,0L,
                 1L,0L,1L,1L,1L,1L,1L,0L,0L,1L,1L,1L,1L,1L,0L,
                 0L,0L,1L,1L,0L,1L,1L,0L,1L,0L,1L,1L,1L,0L,1L,1L,
                 1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,
                 0L,0L,1L,1L,1L,1L,0L,0L,1L,1L,0L,1L,1L,1L,0L,1L,
                 0L,1L,1L,1L,1L,0L,0L,0L,0L,1L,0L,1L,1L,1L,0L,
                 0L,1L,1L,1L,0L,1L,0L,0L,0L,1L,1L,1L,0L,1L,0L,0L,
                 0L,1L,1L),
          Rater2 = c(0L,0L,0L,0L,0L,0L,0L,0L,0L,0L,0L,
                 0L,0L,0L,0L,0L,0L,0L,0L,0L,0L,0L,0L,1L,1L,1L,0L,
                 1L,1L,1L,1L,0L,1L,1L,1L,1L,1L,0L,0L,1L,1L,1L,
                 1L,1L,0L,1L,1L,1L,0L,0L,1L,1L,1L,0L,1L,1L,1L,0L,
                 1L,1L,0L,1L,0L,1L,1L,0L,0L,1L,0L,1L,1L,1L,0L,0L,
                 0L,0L,1L,1L,1L,0L,0L,1L,1L,1L,1L,0L,0L,0L,1L,0L,
                 0L,1L,1L,0L,1L,1L,0L,1L,1L,0L,1L,1L,0L,1L,1L,
                 0L,1L,1L,1L,0L,1L,1L,1L,0L,1L,1L,0L,0L,1L,0L,1L,
                 1L,1L,0L,1L,1L,1L,1L,1L,1L,1L,1L,0L,1L,1L,1L,1L,
                 1L,1L,1L,1L,1L,1L,0L,1L,1L,1L,1L,1L,1L,1L,0L,0L,
                 1L,0L,1L,1L,1L,1L,1L,0L,0L,1L,1L,1L,1L,1L,0L,
                 0L,0L,1L,1L,0L,1L,1L,0L,1L,0L,1L,1L,1L,0L,1L,1L,
                 1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,
                 0L,0L,1L,1L,1L,1L,0L,0L,1L,1L,0L,1L,1L,1L,1L,1L,
                 1L,1L,1L,1L,1L,1L,1L,1L,1L,1L,0L,1L,1L,1L,0L,
                 0L,1L,1L,1L,0L,1L,0L,0L,0L,1L,1L,1L,0L,1L,0L,0L,
                 0L,1L,1L)
)

myirr &lt;- myirr %&gt;% 
    dplyr::mutate(
        RaterA = dplyr::case_when(
            Rater1 == 0 ~ "Negative",
            Rater1 == 1 ~ "Positive"
        )
    ) %&gt;% 
    dplyr::mutate(
        RaterB = dplyr::case_when(
            Rater2 == 0 ~ "Negative",
            Rater2 == 1 ~ "Positive"
        )
    ) %&gt;% 
    dplyr::select(RaterA, RaterB) %&gt;% 
    mutate(RaterA = as.factor(RaterA)) %&gt;% 
    mutate(RaterB = as.factor(RaterB))

table &lt;- myirr %$% 
table(RaterA, RaterB)

mymatrix &lt;- caret::confusionMatrix(table, positive = "Positive")
mymatrix

caret::sensitivity(table, positive = "Positive")


mymatrix2 &lt;- caret::confusionMatrix(table, positive = "Positive", prevalence = 0.25)
mymatrix2


 dat &lt;- as.table(
                matrix(c(670,202,74,640),
                       nrow = 2,
                       byrow = TRUE)
                )

            colnames(dat) &lt;- c("Dis+","Dis-")
            rownames(dat) &lt;- c("Test+","Test-")

            rval &lt;- epiR::epi.tests(dat, conf.level = 0.95)

            rval &lt;- list(
                dat,
                rval,
                print(rval),
                summary(rval)
                         )

devtools::install(upgrade = FALSE, quick = TRUE)
library(dplyr)

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

ratings &lt;- deneme %&gt;% 
    dplyr::select(LVI, PNI, Age, ID)


f &lt;- unlist(lapply(ratings, class))

any(f == "numeric")

all(f == "numeric")


xtitle &lt;- names(ratings)[1]
ytitle &lt;- names(ratings)[2]

result &lt;- table(ratings[,1], ratings[,2],
                dnn = list(xtitle, ytitle))

table(ratings)



result1 &lt;- irr::agree(ratings)


result2 &lt;- irr::kappa2(ratings)


ClinicoPath::agreement(
    data = deneme,
    vars = c(LVI,PNI)
)


result2 &lt;- irr::kappam.fleiss(
                    ratings = ratings,
                    exact = FALSE,
                    detail = TRUE)




deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

mytree &lt;- vtree::vtree(deneme, "LVI PNI")

# write(mytree[["x"]][["diagram"]], 
#       file = here::here("/tododata/trial1.gv"))

# DiagrammeR::grViz(diagram = here::here("/tododata/trial1.gv"))

diagram &lt;- mytree[["x"]][["diagram"]]

mytree2 &lt;- DiagrammeR::grViz(diagram = diagram)


print(mytree2)



# Packages for Development





## rpkgtools


devtools::install_github("IndrajeetPatil/rpkgtools")



## available


Check if a package name is available to use https://docs.ropensci.org/available


https://github.com/r-lib/available



available::available("clinicopath")
available::available("lens2r")





## bench


High Precision Timing of R Expressions http://bench.r-lib.org/

https://github.com/r-lib/bench






## desc


Manipulate DESCRIPTION files
https://github.com/r-lib/desc



## pkgverse

pkgverse: Build a Meta-Package Universe
https://pkgverse.mikewk.com/



## pkgbuild

pkgbuild: Find Tools Needed to Build R Packages
https://github.com/r-lib/pkgbuild


## pkgload

pkgload: Simulate Package Installation and Attach
https://github.com/r-lib/pkgload


## rcmdcheck

rcmdcheck: Run 'R CMD check' from 'R' and Capture Results
https://github.com/r-lib/rcmdcheck




## remotes


## sessioninfo

Print Session Information

https://github.com/r-lib/sessioninfo



## "covr




## "exampletestr


## "covrpage",


## "gramr",


## "lintr",


## "goodpractice",


## "pkgdown",


## "usethis",


## "testthat",


## "spelling",


## "RTest",

https://towardsdatascience.com/rtest-pretty-testing-of-r-packages-50f50b135650


## "rhub",


## "roxygen2",


## "sinew",


## "styler",



## "vdiffr"




## "attachment (https://github.com/ThinkR-open/attachment)
## "covrpage (https://github.com/yonicd/covrpage)
## "defender (https://github.com/ropenscilabs/defender)
## "gramr (https://github.com/ropenscilabs/gramr)
## "packagemetrics (https://github.com/ropenscilabs/packagemetrics)
## "pRojects (https://github.com/lockedata/pRojects)
## "revdepcheck (https://github.com/r-lib/revdepcheck)
## "roxygen2Comment (https://github.com/csgillespie/roxygen2Comment)
## "roxygen2md (https://github.com/r-lib/roxygen2md)
## "testdown (https://github.com/ThinkR-open/testdown)
## "tic (https://github.com/ropenscilabs/tic)





            # Table1 &lt;- table(mydata[[testVariable]], mydata[[goldVariable]])


            # Table1 &lt;- mydata %&gt;%
            #     janitor::tabyl(.data[[testVariable]], .data[[goldVariable]]) %&gt;%
            #     janitor::adorn_totals(dat = ., where = c("row", "col")) %&gt;%
            #     janitor::adorn_percentages(dat = ., denominator = "row") %&gt;%
            #     janitor::adorn_percentages(dat = ., denominator = "col") %&gt;%
            #     janitor::adorn_pct_formatting(dat = ., rounding = "half up", digits = 1) %&gt;%
            #     janitor::adorn_ns(dat = .) %&gt;%
            #     janitor::adorn_title("combined")
            # results1 &lt;- Table1

                # results1 &lt;- summary(km_fit)$table

                # km_fit_median_df &lt;- summary(km_fit)
                # km_fit_median_df &lt;- as.data.frame(km_fit_median_df$table) %&gt;%
                #     janitor::clean_names(dat = ., case = "snake") %&gt;%
                #     tibble::rownames_to_column(.data = .)

                # results1 &lt;- tibble::as_tibble(results1,
                #                              .name_repair = "minimal") %&gt;%
                #     janitor::clean_names(dat = ., case = "snake") %&gt;%
                #     tibble::rownames_to_column(.data = ., var = self$options$explanatory)


table2 &lt;- matrix(c(80, 20, 30, 70), nrow = 2, ncol = 2, byrow = TRUE, dimnames = list(c("Positive", "Negative"), c("Positive","Negative")))

            table3 &lt;- as.table(table2)

            names(attributes(table3)$dimnames) &lt;- c("Test","Gold Standart")

caretresult &lt;- caret::confusionMatrix(table3, mode = "everything")



table3 &lt;- matrix(c(80L, 20L, 25L, 30L, 70L, 75L), nrow = 2, ncol = 3, byrow = TRUE)


# RVAideMemoire::chisq.multcomp() RVAideMemoire::fisher.multcomp()

result1 &lt;- RVAideMemoire::chisq.multcomp(table3)

result1 &lt;- result1[["p.value"]]


result1 &lt;- as.data.frame(result1) %&gt;%
                                tibble::rownames_to_column()

result1 &lt;- result1 %&gt;%
    tidyr::pivot_longer(cols = -rowname) %&gt;%
    dplyr::filter(complete.cases(.))




myfun &lt;- function(i,j) {
    if(!is.na(result1[i,j])){
    paste0(    
dimnames(result1)[[1]][i],
" vs ",
dimnames(result1)[[2]][j],
" p= ",    
result1[i,j])
    }
}

for (i in 1:dim(result1)[1]) {
for (j in 1:dim(result1)[2]) {
    des &lt;- myfun(i,j)
    if(!is.null(des)) print(des)
}
}


myfun1 &lt;- function(i,j) {
    if(!is.na(result1[i,j])){
dimnames(result1)[[1]][i]
    }
}


for (i in 1:dim(result1)[1]) {
for (j in 1:dim(result1)[2]) {
    des &lt;- myfun1(i,j)
    if(!is.null(des)) print(des)
}
}





myfun(3,3)

myfun(1,2)


dimnames(result1)[[1]][2]


RVAideMemoire::fisher.multcomp(table3)


# rmngb::pairwise.chisq.test(x, ...)  rmngb::pairwise.fisher.test(x, ...)


library(rmngb)
x &lt;- sample(1:2, 1e3, TRUE)
g &lt;- sample(1:4, 1e3, TRUE)
result2 &lt;- rmngb::pairwise.chisq.test(x, g)
tab &lt;- table(g, x)

resultrmngb &lt;- rmngb::pairwise.fisher.test(tab, p.adj = "bonf")

result2[["p.value"]]
resultrmngb[["p.value"]]

rmngb::pairwise.chisq.test(tab)





 
formula &lt;- jmvcore::constructFormula(terms = self$options$vars)
formula &lt;- paste('~', formula)
formula &lt;- as.formula(formula)
table1 &lt;- arsenal::tableby(formula, self$data,
total = TRUE,
digits = 1,
digits.count = 1
)
myarsenal &lt;- summary(table1, text = "html")
myarsenal &lt;- kableExtra::kable(myarsenal, format = "html",
digits = 1,
escape = TRUE) %&gt;%
kableExtra::kable_styling(kable_input = .,
bootstrap_options = "striped",
full_width = F,
position = "left")



library(dplyr)

deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))


varsName &lt;- c("LVI", "PNI")

tablelist &lt;- list()

                for (i in 1:length(varsName)) {

                    var &lt;- varsName[i]
                    
                    
                    table &lt;- deneme %&gt;%
                        janitor::tabyl(dat = ., var) %&gt;%
                        janitor::adorn_totals("row") %&gt;%
                        janitor::adorn_pct_formatting(dat = .)

                    tablelist[[i]] &lt;- table

                }

tablelist






            data &lt;- self$data

            vars &lt;- self$options$vars

            facs &lt;- self$options$facs

            target &lt;- self$options$target

            # data &lt;- jmvcore::select(data, c(vars, facs, target))


            if ( ! is.null(vars))
            for (var in vars)
                data[[var]] &lt;- jmvcore::toNumeric(data[[var]])

            if ( ! is.null(facs))
            for (fac in facs)
                data[[fac]] &lt;- as.factor(data[[fac]])


            data[[target]] &lt;- as.factor(data[[target]])

            data &lt;- jmvcore::naOmit(data)
            
            
            
            
            

            # TODO

            # todo &lt;- glue::glue(
            #     "This Module is still under development
            #     -
            #     -
            #     "
            # )

            # self$results$todo$setContent(todo)

            # if (nrow(self$data) == 0)
            #     stop('Data contains no (complete) rows')


            # if (is.null(self$options$vars) || is.null(self$options$target))
            #     return()


            # prepare data for explore ----
            # https://cran.r-project.org/web/packages/explore/vignettes/explore.html


            # result1 &lt;- iris %&gt;% explore::explain_tree(target = Species)
            #
            # self$results$text1$setContent(result1)


            # image &lt;- self$results$plot

            # image$setState(plotData)



            # from https://forum.jamovi.org/viewtopic.php?f=2&amp;t=1287
            # library(caret)
            # library(partykit)
            # detach("package:partykit", unload=TRUE)
            # library(party)

            # Conditional Trees

            # set.seed(3456)
            # model &lt;- train(
            #     yvar ~ .,
            #     data = df,
            #     method = 'ctree2',
            #     trControl = trainControl("cv", number = 10, classProbs = FALSE),
            #     tuneGrid = expand.grid(maxdepth = 3, mincriterion = 0.95)
            # )
            # plot(model$finalModel)
            #
            # t(sapply(unique(where(model$finalModel)), function(x) {
            #     n &lt;- nodes(model$finalModel, x)[[1]]
            #     yvar &lt;- df[as.logical(n$weights), "yvar"]
            #     cbind.data.frame("Node" = as.integer(x),
            #                      psych::describe(yvar, quant=c(.25,.50,.75), skew = FALSE))
            # }))
            
            
            
            
            


            # data &lt;- private$.cleanData()

            # vars &lt;- self$options$vars
            # facs &lt;- self$options$facs
            # target &lt;- self$options$target

            # tree1 &lt;- data %&gt;%
            #     explore::explain_tree(target = .data[[target]])




            # if (is.null(self$options$vars) || is.null(self$options$target))
            #     return()


            # varsName &lt;- self$options$vars
            #
            # facsName &lt;- self$options$facs
            #
            # targetName &lt;- self$options$target
            #
            # data &lt;- jmvcore::select(self$data, c(varsName, facsName, targetName))
            #
            # data[[varsName]] &lt;- jmvcore::toNumeric(data[[varsName]])
            #
            # for (fac in facsName)
            #     data[[facsName]] &lt;- as.factor(data[[facsName]])
            #
            # data &lt;- jmvcore::naOmit(data)




            # tree1 &lt;- data %&gt;%
            #     explore::explain_tree(target = .data[[targetName]])


            # plot &lt;- iris %&gt;% explore::explain_tree(target = Species)
            # if (length(self$options$dep) + length(self$options$group) &lt; 2)
            #     return()

            # tree1 &lt;- iris %&gt;% explore::explain_tree(target = Species)
            # iris$is_versicolor &lt;- ifelse(iris$Species == "versicolor", 1, 0)
            # tree2 &lt;- iris %&gt;%
            # dplyr::select(-Species) %&gt;%
            # explore::explain_tree(target = is_versicolor)
            # tree3 &lt;- iris %&gt;%
            # explore::explain_tree(target = Sepal.Length)



library(magrittr)
# devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

mydata &lt;- deneme

varsName &lt;- "Age"

# facsName &lt;- c("LVI", "PNI")

targetName &lt;- "Outcome"

mydata[[targetName]] &lt;- as.factor(mydata[[targetName]])

mydata &lt;- jmvcore::select(mydata, c(varsName, 
                                    # facsName, 
                                    targetName))

mydata &lt;- jmvcore::naOmit(mydata)



explore::explain_tree(data = mydata,
                      target = targetName
                      )

mydata %&gt;%
explore::explain_tree(target = .data[[targetName]])




iris %&gt;% explore::explain_tree(target = Species)




BreastCancer %&gt;%
                dplyr::select(all_of(mytarget), all_of(myvars)) %&gt;%
                explore::explain_tree(target = .data[[mytarget]])




ClinicoPath::tree(
    data = data,
    vars = Age,
    facs = vars(LVI, PNI),
    target = Mortality)


mytarget &lt;- "Class"
myvars &lt;- c("Cl.thickness",
            "Cell.size",
            "Cell.shape",
            "Marg.adhesion",
            "Epith.c.size",
            "Bare.nuclei",
            "Bl.cromatin",
            "Normal.nucleoli",
            "Mitoses")

# mytarget &lt;- jmvcore::composeTerms(mytarget)
# mytarget &lt;- jmvcore::constructFormula(terms = mytarget)



# install.packages("easyalluvial")
library(magrittr)
# devtools::install(upgrade = FALSE, quick = TRUE)
deneme &lt;- readxl::read_xlsx(path = here::here("tododata", "histopathology-template2019-11-25.xlsx"))

mydata &lt;- deneme

var1 &lt;- "TStage"

var2 &lt;- "Grade"

mydata &lt;- jmvcore::select(df = mydata, columnNames = c(var1, var2))

mydata &lt;- jmvcore::naOmit(mydata)

plot &lt;- 
easyalluvial::alluvial_wide( data = mydata
                , max_variables = 5
                , fill_by = 'first_variable'
                , verbose = TRUE
                )

plot %&gt;% 
    easyalluvial::add_marginal_histograms(mydata)


</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://www.serdarbalci.com/">Serdar Balci</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
